<!DOCTYPE html>
<html lang="en">
    <head>
    <link href="http://gmpg.org/xfn/11" rel="profile">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta http-equiv="content-type" content="text/html; charset=utf-8">
    <meta name="theme-color" content="#00aeef">
    <meta http-equiv="Content-Language" content="en">

    <!-- Enable responsiveness on mobile devices-->
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1">

    <title>
        
        E-Wallets &middot; Braspag Developers - Manuais
        
    </title>

    <link rel="shortcut icon" href="https://braspag.github.io//en/assets/favicon.png">

    <!-- CSS -->
    <link href="https://fonts.googleapis.com/css?family=Fira+Sans" rel="stylesheet">
    <script src="https://use.fontawesome.com/3ae06f1030.js"></script>
    <link rel="stylesheet" href="https://braspag.github.io//en/assets/css/poole.css">
    <link rel="stylesheet" href="https://braspag.github.io//en/assets/css/syntax.css">
    <link rel="stylesheet" href="https://braspag.github.io//en/assets/css/hyde.css">

    <link rel="stylesheet" href="https://braspag.github.io//en/assets/css/bootstrap.css">
    <link rel="stylesheet" href="https://braspag.github.io//en/assets/css/jquery.tocify.css">
    <link rel="stylesheet" href="https://braspag.github.io//en/assets/css/jquery-ui.css">
    <link rel="stylesheet" href="https://braspag.github.io//en/assets/css/prettify.css">
    <link rel="stylesheet" href="https://braspag.github.io//en/assets/css/custom.css">
    <link rel="stylesheet" href="https://braspag.github.io//en/assets/css/braspag.css">

    
        
            <link rel="alternate" hreflang="pt" href="https://braspag.github.io//en/manual/ewallets" />
        
    
        
            <link rel="alternate" hreflang="en" href="https://braspag.github.io//en/en/manual/ewallets" />
        
    

    <!-- RSS -->
    <link rel="alternate" type="application/rss+xml" title="RSS" href="https://braspag.github.io//en/atom.xml">
</head>

    <body>
        
            <div class="content-container">
            <div class="language-tabs">
                <a class='hide-btn' id="hide-button" title="Toggle"><i class="fa fa-bars" aria-hidden="true"></i></a>
                <ul class="language-buttons">
                    
                    <li><a data-language-name='json'>JSON</a></li>
                    
                    <li><a data-language-name='shell'>cURL</a></li>
                    
                </ul>
            </div>
            <div class="dark-box"></div>
            <div class="overlay"></div>
        });
        
            <div id="submenu">
                <div class="submenu-container">
                    <div class="submenu-row sub-items">
                        <div class="submenu-itens">
                            <a href="https://suporte.braspag.com.br/hc/pt-br" class="help">Help</a>

                            
                            <div class="lang">
                                <span>Languages</span>

                                
                                    
                                    <a href="https://braspag.github.io//manual/ewallets">
                                    

                                        <img alt="Português" src="https://braspag.github.io//en/assets/images/pt.png"/>
                                    </a>
                                
                                    
                                    <a href="https://braspag.github.io//en/manual/ewallets">
                                    

                                        <img alt="English" src="https://braspag.github.io//en/assets/images/en.png"/>
                                    </a>
                                
                            </div>
                            
                        </div>

                        
                        <div class="search">
                            <input type="text" class="search" id="input-search">
                        </div>
                    </div>
                    <div class="submenu-row results">
                        <div class="search-results-container">
                            <ul class="search-results"></ul>
                        </div>
                    </div>
                        

                    <div class="submenu-row breads">
                        <ol class="breadcrumb">
                            
                            <li><a href="https://braspag.github.io//en/">Home</a></li>
                            
                            
                            
                            
                                
                                    
                                    
                                    
                                    
                                    
                                        
                                    
                                        
                                    
                                        
                                    
                                
                            
                                
                                    
                                    <li class="active">&gt; <a href="https://braspag.github.io//en/manual/ewallets">E-Wallets</a></li>
                                    
                                
                            
                        </ol>
                    </div>
                </div>
            </div>

            <div class="post">
  <h1 id="e-wallet-digital-wallet">E-Wallet (Digital Wallet)</h1>

<p>E-wallets are electronic safes (repositories) of cards and payment data for the physical and e-commerce customers. Digital wallets allow a customer to register their payment details, making the purchase process more convenient and secure.</p>

<aside class="warning">The merchant needs the wallets to be integrated in their checkout in order to use them in Pagador.</aside>

<p>Contact the provider of your choice for further information on how to contract the service.</p>

<h2 id="available-e-wallets">Available E-Wallets</h2>

<p>Pagador currently supports the following digital wallets:</p>

<ul>
  <li><a href="https://www.apple.com/br/apple-pay/" target="_blank"><em>Apple Pay</em></a></li>
  <li><a href="https://pay.google.com/intl/pt-BR_br/about/" target="_blank"><em>Google Pay</em></a></li>
  <li><a href="https://www.samsung.com.br/samsungpay/" target="_blank"><em>Samsung Pay</em></a></li>
</ul>

<aside class="warning">When the “Wallet” node is sent in the request, the “CreditCard” node becomes optional.</aside>

<aside class="warning">When the “Wallet” node is sent in the request, the “DebitCard” node containing the “ReturnUrl” will be required for debit cards.</aside>

<h2 id="e-wallet-integration">E-Wallet Integration</h2>

<p>Here is an example of a standard request for the e-wallet integration:</p>

<h3 id="request">Request</h3>

<aside class="request"><span class="method post">POST</span> <span class="endpoint">/v2/sales/</span></aside>

<div class="language-json highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="p">{</span><span class="w">
  </span><span class="nl">"MerchantOrderId"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2014111708"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"Customer"</span><span class="p">:{</span><span class="w">
    </span><span class="nl">"Name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Example Standard Wallet"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"Identity"</span><span class="p">:</span><span class="w"> </span><span class="s2">"11225468954"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"IdentityType"</span><span class="p">:</span><span class="w"> </span><span class="s2">"CPF"</span><span class="w">
  </span><span class="p">},</span><span class="w">
  </span><span class="nl">"Payment"</span><span class="p">:{</span><span class="w">
    </span><span class="nl">"Type"</span><span class="p">:</span><span class="s2">"CreditCard"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"Amount"</span><span class="p">:</span><span class="w"> </span><span class="mi">100</span><span class="p">,</span><span class="w">
    </span><span class="nl">"Provider"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Cielo"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"Installments"</span><span class="p">:</span><span class="mi">1</span><span class="p">,</span><span class="w">
    </span><span class="nl">"Currency"</span><span class="p">:</span><span class="s2">"BRL"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"Payment.Capture"</span><span class="p">:</span><span class="w"> </span><span class="s2">"false"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"Wallet"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
      </span><span class="nl">"Type"</span><span class="p">:</span><span class="w"> </span><span class="s2">"WALLET TYPE"</span><span class="p">,</span><span class="w">
      </span><span class="nl">"WalletKey"</span><span class="p">:</span><span class="w"> </span><span class="s2">"WALLET STORE ID"</span><span class="p">,</span><span class="w">
      </span><span class="nl">"AdditionalData"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
        </span><span class="nl">"EphemeralPublicKey"</span><span class="p">:</span><span class="w"> </span><span class="s2">"TOKEN INFORMED BY WALLET"</span><span class="w">
      </span><span class="p">}</span><span class="w">
    </span><span class="p">}</span><span class="w">
  </span><span class="p">}</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre></div></div>

<table>
  <thead>
    <tr>
      <th>Property</th>
      <th>Description</th>
      <th>Type</th>
      <th>Size</th>
      <th>Required</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td><code class="language-plaintext highlighter-rouge">MerchantId</code></td>
      <td>Store identifier at Braspag. (through header)</td>
      <td>GUID</td>
      <td>36</td>
      <td>Yes</td>
    </tr>
    <tr>
      <td><code class="language-plaintext highlighter-rouge">MerchantKey</code></td>
      <td>Public key for dual authentication at Braspag. (through header)</td>
      <td>Text</td>
      <td>40</td>
      <td>Yes</td>
    </tr>
    <tr>
      <td><code class="language-plaintext highlighter-rouge">RequestId</code></td>
      <td>Request identifier, used when the merchant uses different servers for each GET/POST/PUT. (through header)</td>
      <td>GUID</td>
      <td>36</td>
      <td>No</td>
    </tr>
    <tr>
      <td><code class="language-plaintext highlighter-rouge">MerchantOrderId</code></td>
      <td>Order ID number.</td>
      <td>Text</td>
      <td>50</td>
      <td>Yes</td>
    </tr>
    <tr>
      <td><code class="language-plaintext highlighter-rouge">Customer.Name</code></td>
      <td>Customer’s name.</td>
      <td>Text</td>
      <td>255</td>
      <td>Yes</td>
    </tr>
    <tr>
      <td><code class="language-plaintext highlighter-rouge">Customer.Status</code></td>
      <td>Customer’s registration status (“NEW” / “EXISTING”).</td>
      <td>Text</td>
      <td>255</td>
      <td>No</td>
    </tr>
    <tr>
      <td><code class="language-plaintext highlighter-rouge">Payment.Type</code></td>
      <td>Payment method type.</td>
      <td>Text</td>
      <td>100</td>
      <td>Yes</td>
    </tr>
    <tr>
      <td><code class="language-plaintext highlighter-rouge">Payment.Amount</code></td>
      <td>Order amount in cents.</td>
      <td>Number</td>
      <td>15</td>
      <td>Yes</td>
    </tr>
    <tr>
      <td><code class="language-plaintext highlighter-rouge">Payment.Provider</code></td>
      <td>Cielo providers only (“Cielo” / “Cielo30”).</td>
      <td>Text</td>
      <td>15</td>
      <td>Yes</td>
    </tr>
    <tr>
      <td><code class="language-plaintext highlighter-rouge">Payment.Installments</code></td>
      <td>Number of installments.</td>
      <td>Number</td>
      <td>2</td>
      <td>Yes</td>
    </tr>
    <tr>
      <td><code class="language-plaintext highlighter-rouge">Payment.Capture</code></td>
      <td>Indicates whether the authorization will use automatic capture (“true”) or not (“false”). If “false”, a capture request must be sent - please, check with the acquirer if pre-authorization is available.</td>
      <td>Boolean</td>
      <td>-</td>
      <td>No (default “false”)</td>
    </tr>
    <tr>
      <td><code class="language-plaintext highlighter-rouge">Wallet.Type</code></td>
      <td>Wallet type: “ApplePay” / “SamsungPay” / “GooglePay” / “VisaCheckout” / “Masterpass”.</td>
      <td>Text</td>
      <td>–</td>
      <td>Yes</td>
    </tr>
    <tr>
      <td><code class="language-plaintext highlighter-rouge">Wallet.WalletKey</code></td>
      <td>Cryptographic key that identifies stores in wallets. Refer to the WalletKey table in the ANNEXES for more information.</td>
      <td>Text</td>
      <td>–</td>
      <td>Yes</td>
    </tr>
    <tr>
      <td><code class="language-plaintext highlighter-rouge">Wallet.AdditionalData.EphemeralPublicKey</code></td>
      <td>Token returned by wallet. Must be submitted in <strong>ApplePay</strong> integrations.</td>
      <td>Text</td>
      <td>–</td>
      <td>Yes</td>
    </tr>
    <tr>
      <td><code class="language-plaintext highlighter-rouge">Wallet.AdditionalData.CaptureCode</code></td>
      <td>Code informed by <strong>Masterpass</strong> to the merchant.</td>
      <td>Text</td>
      <td>–</td>
      <td>Yes</td>
    </tr>
    <tr>
      <td><code class="language-plaintext highlighter-rouge">Wallet.AdditionalData.Signature</code></td>
      <td>Token returned by wallet. Must be submitted in <strong>GooglePay</strong> integrations.</td>
      <td>Text</td>
      <td>–</td>
      <td>Yes</td>
    </tr>
  </tbody>
</table>

<h4 id="walletkey">WalletKey</h4>

<p>WalletKey is the identifier used by Braspag to decrypt the payloads returned by an e-wallet.</p>

<p>Here is a list of the <code class="language-plaintext highlighter-rouge">WalletKey</code> formats to be passed to the Pagador API:</p>

<table>
  <thead>
    <tr>
      <th>Wallet</th>
      <th>Example</th>
      <th> </th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td><em>Apple Pay</em></td>
      <td>9zcCAciwoTS+qBx8jWb++64eHT2QZTWBs6qMVJ0GO+AqpcDVkxGPNpOR/D1bv5AZ62+5lKvucati0+eu7hdilwUYT3n5swkHuIzX2KO80Apx/SkhoVM5dqgyKrak5VD2/drcGh9xqEanWkyd7wl200sYj4QUMbeLhyaY7bCdnnpKDJgpOY6J883fX3TiHoZorb/QlEEOpvYcbcFYs3ELZ7QVtjxyrO2LmPsIkz2BgNm5f+JaJUSAOectahgLZnZR+easdhghrsa/E9A6DwjMd0fDYnxjj0bQDfaZpBPeGGPFLu5YYn1IDc</td>
      <td>.</td>
    </tr>
    <tr>
      <td><em>Samsung Pay</em></td>
      <td>eyJhbGciOiJSU0ExXzUiLCJraWQiOiIvam1iMU9PL2hHdFRVSWxHNFpxY2VYclVEbmFOUFV1ZUR5M2FWeHBzYXVRPSIsInR5cCI6IkpPU0UiLCJjaGFubmVsU2VjdXJpdHlDb250ZXh0IjoiUlNBX1BLSSIsImVuYyI6IkExMjhHQ00ifQ.cCsGbqgFdzVb1jhXNR–gApzoXH-fdafddfa-Bo_utsmDN_DuGm69Kk2_nh6txa7ML9PCI59LFfOMniAf7ZwoZUBDCY7Oh8kx3wsZ0kxNBwfyLBCMEYzET0qcIYxePezQpkNcaZ4oogmdNSpYY-KbZGMcWpo1DKhWphDVp0lZcLxA6Q25K78e5AtarR5whN4HUAkurQ.CFjWpHkAVoLCG8q0.NcsTuauebemJXmos_mLMTyLhEHL-p5Wv6J88WkgzyjAt_DW7laiPMYw2sqRXkOiMJLwhifRzbSp8ZgJBM25IX05dKKSS4XfFjJQQjOBHw6PYtEF5pUDMLHML3jcddCrX07abfef_DuP41PqOQYsjwesLZ8XsRj-R0TH4diOZ_GQop8_oawjRIo9eJr9Wbtho0h8kAzHYpfuhamOPT718EaGAY6SSrR7t6nBkzGNkrKAmHkC7aRwe.AbZG53wRqgF0XRG3wUK_UQ</td>
      <td>.</td>
    </tr>
    <tr>
      <td><em>Google Pay</em></td>
      <td>{"encryptedMessage":"0mXBb94Cy9JZhMuwtrBhMjXb8pDslrNsN5KhcEqnowOINqJgjXHD36KcCuzpQQ4cDAe64ZLmk2N3UBGXsN9hMMyeMakXlidVmteE+QMaNZIor048oJqlUIFPD54B/ic8zCdqq3xnefUmyKQe0I03x57TcEA9xAT/E4x3rYfyqLFUAEtu2lT0GwTdwgrsT8pKoTldHIgP+wVNTjrKvJrB4xM/Bhn6JfcSmOzFyI6w37mBU71/TK761nYOSxt7z1bNWSLZ4b8xBu1dlRgen2BSlqdafuQjV3UZjr6ubSvaJ8NiCh5FD/X013kAwLuLALMS2uAFS9j8cZ6R6zNIi13fK6Fe4ACbFTHwLzSNZjQiaRDb6MlMnY8/amncPIOXzpirb5ScIz8EZUL05xd+3YWVTVfpqgFo1eaaS+wZdUyRG0QEgOsr6eLBoH8d5lfV9Rx6XdioorUuT7s1Yqc0OJZO+fhBt6X0izE9hBGTexdZyg\u003d\u003d","ephemeralPublicKey":"BMdwrkJeEgCOtLevYsN3MbdP8xbOItXiTejoB6vXy0Kn0ZM10jy4Aasd6jTSxtoxoTpFydLhj5kzoOhbw2OzZu0\u003d","tag":"yAQIjWZ0VuCC7SWyYwc4eXOzpSUKhZduF9ip0Ji+Gj8\u003d"}</td>
      <td>.</td>
    </tr>
    <tr>
      <td><em>Visa Checkout</em></td>
      <td>1140812334225873901</td>
      <td>.</td>
    </tr>
    <tr>
      <td><em>Masterpass</em></td>
      <td>a561da1c18a89cfdafas875f9d43fc46cd9bf3e1</td>
      <td>.</td>
    </tr>
  </tbody>
</table>

<h4 id="ephemeralpublickey">EphemeralPublicKey</h4>

<p>This is the <code class="language-plaintext highlighter-rouge">EphemeralPublicKey</code> format to be passed to the Pagador API:</p>

<table>
  <thead>
    <tr>
      <th>Wallet</th>
      <th>Example</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td><em>Apple Pay</em></td>
      <td><code class="language-plaintext highlighter-rouge">MFkwEwYHKoZIzj0CAQYIKoZIzj0DAQcDQgAEoedz1NqI6hs9hEO6dBsnn0X0xp5/DKj3gXirjEqxNIJ8JyhGxVB3ITd0E+6uG4W6Evt+kugG8gOhCBrdUU6JwQ==</code></td>
    </tr>
  </tbody>
</table>

<h4 id="signature">Signature</h4>

<p>This is the <code class="language-plaintext highlighter-rouge">Signature</code> format to be passed to the Pagador API:</p>

<table>
  <thead>
    <tr>
      <th>Wallet</th>
      <th>Example</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td><em>Google Pay</em></td>
      <td><code class="language-plaintext highlighter-rouge">MEUCIQCGQLOmwxe5eFMSuTcr4EcwSZu35fB0KlCWcVop6ZxxhgIgbdtNHThSlynOopfxMIxkDs0cLh2NFh5es+J5uDmaViA=</code></td>
    </tr>
  </tbody>
</table>

<h3 id="responses">Responses</h3>

<div class="language-json highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="p">{</span><span class="w">
    </span><span class="nl">"MerchantOrderId"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2014111703"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"Customer"</span><span class="p">:{</span><span class="w">
        </span><span class="nl">"Name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"[Guest]"</span><span class="w">
    </span><span class="p">},</span><span class="w">
    </span><span class="nl">"Payment"</span><span class="p">:{</span><span class="w">
        </span><span class="nl">"ServiceTaxAmount"</span><span class="p">:</span><span class="w"> </span><span class="mi">0</span><span class="p">,</span><span class="w">
        </span><span class="nl">"Installments"</span><span class="p">:</span><span class="mi">1</span><span class="p">,</span><span class="w">
        </span><span class="nl">"Interest"</span><span class="p">:</span><span class="w"> </span><span class="mi">0</span><span class="p">,</span><span class="w">
        </span><span class="nl">"Capture"</span><span class="p">:</span><span class="w"> </span><span class="kc">false</span><span class="p">,</span><span class="w">
        </span><span class="nl">"Authenticate"</span><span class="p">:</span><span class="kc">false</span><span class="p">,</span><span class="w">
        </span><span class="nl">"Recurrent"</span><span class="p">:</span><span class="kc">false</span><span class="p">,</span><span class="w">
        </span><span class="nl">"CreditCard"</span><span class="p">:{</span><span class="w">
            </span><span class="nl">"CardNumber"</span><span class="p">:</span><span class="w"> </span><span class="s2">"453211* *** **1521"</span><span class="p">,</span><span class="w">
            </span><span class="nl">"Holder"</span><span class="p">:</span><span class="w"> </span><span class="s2">"BJORN IRONSIDE"</span><span class="p">,</span><span class="w">
            </span><span class="nl">"ExpirationDate"</span><span class="p">:</span><span class="w"> </span><span class="s2">"08/2020"</span><span class="p">,</span><span class="w">
            </span><span class="nl">"SaveCard"</span><span class="p">:</span><span class="s2">"false"</span><span class="p">,</span><span class="w">
            </span><span class="nl">"Brand"</span><span class="p">:</span><span class="s2">"Visa"</span><span class="p">,</span><span class="w">
        </span><span class="p">},</span><span class="w">
        </span><span class="nl">"Tid"</span><span class="p">:</span><span class="w"> </span><span class="s2">"0319040817883"</span><span class="p">,</span><span class="w">
        </span><span class="nl">"ProofOfSale"</span><span class="p">:</span><span class="w"> </span><span class="s2">"817883"</span><span class="p">,</span><span class="w">
        </span><span class="nl">"AuthorizationCode"</span><span class="p">:</span><span class="w"> </span><span class="s2">"027795"</span><span class="p">,</span><span class="w">
        </span><span class="nl">"Wallet"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
            </span><span class="nl">"Type"</span><span class="p">:</span><span class="w"> </span><span class="s2">"WALLET TYPE"</span><span class="p">,</span><span class="w">
            </span><span class="nl">"WalletKey"</span><span class="p">:</span><span class="w"> </span><span class="s2">"WALLET STORE ID"</span><span class="p">,</span><span class="w">
            </span><span class="nl">"Eci"</span><span class="p">:</span><span class="w"> </span><span class="mi">0</span><span class="p">,</span><span class="w">
            </span><span class="nl">"AdditionalData"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
                </span><span class="nl">"EphemeralPublicKey"</span><span class="p">:</span><span class="w"> </span><span class="s2">"TOKEN INFORMED BY WALLET"</span><span class="w">
            </span><span class="p">},</span><span class="w">
        </span><span class="p">},</span><span class="w">
        </span><span class="nl">"SoftDescriptor"</span><span class="p">:</span><span class="w"> </span><span class="s2">"123456789ABCD"</span><span class="p">,</span><span class="w">
        </span><span class="nl">"Amount"</span><span class="p">:</span><span class="w"> </span><span class="mi">100</span><span class="p">,</span><span class="w">
        </span><span class="nl">"ReceivedDate"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2018-03-19 16:08:16"</span><span class="p">,</span><span class="w">
        </span><span class="nl">"Status"</span><span class="p">:</span><span class="w"> </span><span class="mi">1</span><span class="p">,</span><span class="w">
        </span><span class="nl">"IsSplitted"</span><span class="p">:</span><span class="w"> </span><span class="kc">false</span><span class="p">,</span><span class="w">
        </span><span class="nl">"ReturnMessage"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Operation Successful"</span><span class="p">,</span><span class="w">
        </span><span class="nl">"ReturnCode"</span><span class="p">:</span><span class="w"> </span><span class="s2">"4"</span><span class="p">,</span><span class="w">
        </span><span class="nl">"PaymentId"</span><span class="p">:</span><span class="w"> </span><span class="s2">"e57b09eb-475b-44b6-ac71-01b9b82f2491"</span><span class="p">,</span><span class="w">
        </span><span class="nl">"Type"</span><span class="p">:</span><span class="w"> </span><span class="s2">"CreditCard"</span><span class="p">,</span><span class="w">
        </span><span class="nl">"Currency"</span><span class="p">:</span><span class="s2">"BRL"</span><span class="p">,</span><span class="w">
        </span><span class="nl">"Country"</span><span class="p">:</span><span class="w"> </span><span class="s2">"BRA"</span><span class="p">,</span><span class="w">
        </span><span class="nl">"Links"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
            </span><span class="p">{</span><span class="w">
                </span><span class="nl">"Method"</span><span class="p">:</span><span class="w"> </span><span class="s2">"GET"</span><span class="p">,</span><span class="w">
                </span><span class="nl">"Rel"</span><span class="p">:</span><span class="w"> </span><span class="s2">"self"</span><span class="p">,</span><span class="w">
                </span><span class="nl">"Href"</span><span class="p">:</span><span class="w"> </span><span class="s2">"https://apiquerysandbox.braspag.com.br/v2/sales/e57b09eb-475b-44b6-ac71-01b9b82f2491"</span><span class="w">
            </span><span class="p">},</span><span class="w">
            </span><span class="p">{</span><span class="w">
                </span><span class="nl">"Method"</span><span class="p">:</span><span class="w"> </span><span class="s2">"PUT"</span><span class="p">,</span><span class="w">
                </span><span class="nl">"Rel"</span><span class="p">:</span><span class="w"> </span><span class="s2">"capture"</span><span class="p">,</span><span class="w">
                </span><span class="nl">"Href"</span><span class="p">:</span><span class="w"> </span><span class="s2">"https://apisandbox.braspag.com.br/v2/sales/e57b09eb-475b-44b6-ac71-01b9b82f2491/capture"</span><span class="w">
            </span><span class="p">},</span><span class="w">
            </span><span class="p">{</span><span class="w">
                </span><span class="nl">"Method"</span><span class="p">:</span><span class="w"> </span><span class="s2">"PUT"</span><span class="p">,</span><span class="w">
                </span><span class="nl">"Rel"</span><span class="p">:</span><span class="w"> </span><span class="s2">"void"</span><span class="p">,</span><span class="w">
                </span><span class="nl">"Href"</span><span class="p">:</span><span class="w"> </span><span class="s2">"https://apisandbox.braspag.com.br/v2/sales/e57b09eb-475b-44b6-ac71-01b9b82f2491/void"</span><span class="w">
            </span><span class="p">}</span><span class="w">
        </span><span class="p">]</span><span class="w">
    </span><span class="p">}</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre></div></div>

<table>
  <thead>
    <tr>
      <th>Property</th>
      <th>Description</th>
      <th>Type</th>
      <th>Size</th>
      <th>Format</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td><code class="language-plaintext highlighter-rouge">ProofOfSale</code></td>
      <td>Authorization number, identical to NSU.</td>
      <td>Text</td>
      <td>6</td>
      <td>Alphanumeric</td>
    </tr>
    <tr>
      <td><code class="language-plaintext highlighter-rouge">Tid</code></td>
      <td>Transaction ID in the acquirer.</td>
      <td>Text</td>
      <td>20</td>
      <td>Alphanumeric</td>
    </tr>
    <tr>
      <td><code class="language-plaintext highlighter-rouge">AuthorizationCode</code></td>
      <td>Authorization code.</td>
      <td>Text</td>
      <td>6</td>
      <td>Alphanumeric</td>
    </tr>
    <tr>
      <td><code class="language-plaintext highlighter-rouge">SoftDescriptor</code></td>
      <td>Text to be printed on the bearer bank statement. Available for VISA/MASTER only - no special characters allowed.</td>
      <td>Text</td>
      <td>13</td>
      <td>Alphanumeric</td>
    </tr>
    <tr>
      <td><code class="language-plaintext highlighter-rouge">PaymentId</code></td>
      <td>Order identifier field.</td>
      <td>GUID</td>
      <td>36</td>
      <td>xxxxxxxx-xxxx-xxxx-xxxx-xxxxxxxxxxxx</td>
    </tr>
    <tr>
      <td><code class="language-plaintext highlighter-rouge">ECI</code></td>
      <td><em>Electronic Commerce Indicator</em>. Represents how secure a transaction is.</td>
      <td>Text</td>
      <td>2</td>
      <td>E.g.: 7</td>
    </tr>
    <tr>
      <td><code class="language-plaintext highlighter-rouge">Status</code></td>
      <td>Transaction status.</td>
      <td>Byte</td>
      <td>2</td>
      <td>E.g.: 1</td>
    </tr>
    <tr>
      <td><code class="language-plaintext highlighter-rouge">ReturnCode</code></td>
      <td>Return code from the acquirer.</td>
      <td>Text</td>
      <td>32</td>
      <td>Alphanumeric</td>
    </tr>
    <tr>
      <td><code class="language-plaintext highlighter-rouge">ReturnMessage</code></td>
      <td>Return message from the acquirer.</td>
      <td>Text</td>
      <td>–</td>
      <td>Alphanumeric</td>
    </tr>
    <tr>
      <td><code class="language-plaintext highlighter-rouge">Type</code></td>
      <td>Wallet type: “ApplePay” / “SamsungPay” / “GooglePay” / “VisaCheckout” / “Masterpass”.</td>
      <td>Text</td>
      <td>–</td>
      <td>Alphanumeric</td>
    </tr>
    <tr>
      <td><code class="language-plaintext highlighter-rouge">WalletKey</code></td>
      <td>Cryptographic key that identifies stores in wallets. Check the WalletKey table in the ANNEXES for more information.</td>
      <td>Text</td>
      <td>–</td>
      <td>See “WalletKey” table annexed</td>
    </tr>
    <tr>
      <td><code class="language-plaintext highlighter-rouge">AdditionalData.EphemeralPublicKey</code></td>
      <td>Token returned by wallet. Must be submitted in <strong>ApplePay</strong> integrations.</td>
      <td>Text</td>
      <td>–</td>
      <td>See “EphemeralPublicKey” table annexed</td>
    </tr>
    <tr>
      <td><code class="language-plaintext highlighter-rouge">AdditionalData.CaptureCode</code></td>
      <td>Code informed by <strong>Masterpass</strong> to the merchant.</td>
      <td>Text</td>
      <td>–</td>
      <td>3</td>
    </tr>
    <tr>
      <td><code class="language-plaintext highlighter-rouge">AdditionalData.Signature</code></td>
      <td>Token returned by wallet. Must be submitted in <strong>GooglePay</strong> integrations.</td>
      <td>Text</td>
      <td>–</td>
      <td>See “Signature” table annexed</td>
    </tr>
  </tbody>
</table>

<h1 id="examples-of-integration">Examples of Integration</h1>

<p>Here are a few examples of integration with the main e-wallets available in the market:</p>

<h1 id="apple-pay-">Apple Pay ™</h1>

<p>Apple Pay is a digital wallet. It allows shoppers to make payments in e-commerce stores and apps in a safe and easy way, using credit and debit cards stored in their Apple account and devices.</p>

<h2 id="prerequisites">Prerequisites</h2>

<p>In order to use Apple Pay, your store must be previously registered in the AppleID program. In addition to that, you must also:</p>

<ol>
  <li>Enroll your store through <a href="https://developer.apple.com/programs/enroll/" target="_blank">this URL</a>, following all steps required by Apple.</li>
  <li>Follow the procedure set out in this document, in order to complete your integration with Apple.</li>
  <li>Hire Pagador API REST as the payment gateway.</li>
  <li>Hire Cielo 3.0 as the acquirer.</li>
  <li>Integrate with <a href="https://braspag.github.io//en/manual/braspag-pagador" target="_blank">Pagador API REST</a>.</li>
</ol>

<h2 id="part-1---configuring-the-merchant-identifier">PART 1 - Configuring the Merchant Identifier</h2>

<p>To begin with, you must create a <strong>merchant identifier</strong> for your store. After that, the merchant identifier must be sent to Braspag in request for a <strong>“.CSR” certificate</strong>. The “.CSR” certificate created by Braspag must be used to create the new “.CER” certificate, in Apple. This <strong>“.CER” certificate</strong> will be used to proceed to the second part of the process.</p>

<h3 id="step-1---create-a-merchant-identifier">Step 1 - Create a Merchant Identifier</h3>

<p>The merchant identifier must be created through the <a href="https://developer.apple.com/account/resources" target="_blank">Apple Developer</a> website as follows:</p>

<ol>
  <li>In the <strong>“Certificates, Identifiers &amp; Profiles”</strong> section, select <strong>“Identifiers”</strong> on the side menu, and click the <code class="language-plaintext highlighter-rouge">(+)</code> button by the title:
<img src="https://braspag.github.io//images/braspag/pagador/applepay01.png" alt="Step1.1" /></li>
  <li>Select the <strong>“Merchant IDs”</strong> option, then click <code class="language-plaintext highlighter-rouge">Continue</code>:
<img src="https://braspag.github.io//images/braspag/pagador/applepay02.png" alt="Step1.2" /></li>
  <li>Insert values in the <strong>“Description”</strong> and <strong>“Identifier”</strong> fields, in accordance with each specification, and click <code class="language-plaintext highlighter-rouge">Continue</code>:
<img src="https://braspag.github.io//images/braspag/pagador/applepay03.png" alt="Step1.3" /></li>
  <li>Finally click <code class="language-plaintext highlighter-rouge">Register</code>:
<img src="https://braspag.github.io//images/braspag/pagador/applepay04.png" alt="Step1.4" /></li>
</ol>

<h3 id="step-2---apply-for-a-csr-certificate">Step 2 - Apply for a “.CSR” Certificate</h3>

<p>To send Braspag a request for a certificate in the “.CSR” format, contact our <a href="https://suporte.braspag.com.br/hc/pt-br/requests/new" target="_blank">Support Team</a> informing the following:</p>

<ol>
  <li>The <strong>Merchant Identifier</strong> created in “Step 1”;</li>
  <li>Your store “in production” <strong>Merchant ID</strong> at Braspag.</li>
</ol>

<p>Our team will get back to you with the “.CSR” file in up to 48 working hours.</p>

<h3 id="step-3---create-a-cer-certificate">Step 3 - Create a “.CER” Certificate</h3>

<p>To create a payment processing certificate (“.CER”) to be used in your virtual store or app, you must enter the <a href="https://developer.apple.com/account/resources" target="_blank">Apple Developer</a>  website and follow the procedure below:</p>

<ol>
  <li>In the <strong>“Certificates, Identifier &amp; Profiles”</strong> section, select <strong>“Identifiers”</strong> on the side menu.</li>
  <li>Use the filter on the top right corner (<strong>“App IDs”</strong>), to locate the <strong>“Merchant IDs”</strong> item:
<img src="https://braspag.github.io//images/braspag/pagador/applepay05.png" alt="Step2.1" /></li>
  <li>Select the recently created identifier:
<img src="https://braspag.github.io//images/braspag/pagador/applepay06.png" alt="Step2.2" /></li>
  <li>In the <strong>“Apple Pay Payment Processing Certificate”</strong> block, click the <code class="language-plaintext highlighter-rouge">Create Certificate</code> button right after the short description:
<img src="https://braspag.github.io//images/braspag/pagador/applepay07.png" alt="Step2.3" /></li>
  <li>Choose <strong>“No”</strong> in <strong>“Edit or Configure Merchant ID”</strong>:
<img src="https://braspag.github.io//images/braspag/pagador/applepay08.png" alt="Step2.4" /></li>
  <li>In the dialog box, click <code class="language-plaintext highlighter-rouge">Choose File</code> and choose the “.CSR” certificate sent by Braspag:
<img src="https://braspag.github.io//images/braspag/pagador/applepay09.png" alt="Step2.5" /></li>
  <li>Click <code class="language-plaintext highlighter-rouge">Continue</code>:
<img src="https://braspag.github.io//images/braspag/pagador/applepay10.png" alt="Step2.6" /></li>
  <li>Click <code class="language-plaintext highlighter-rouge">Download</code> and save the “.CER” file:
<img src="https://braspag.github.io//images/braspag/pagador/applepay11.png" alt="Step2.7" /></li>
</ol>

<p>For more details on the process, access Apple’s <a href="https://help.apple.com/developer-account/#/devb2e62b839" target="_blank">Developer Account Help</a>.</p>

<h2 id="part-2-integrating-with-apple-pay">PART 2. Integrating with Apple Pay</h2>

<p>Most of the process of enabling the “Pay with Apple Pay” button in your app or site is performed during your wallet integration. For that reason, we recommend you to follow the instructions available in the <a href="https://developer.apple.com/documentation" target="_blank">Apple Developer Documentation</a> website for Apple’s self-service implementation.</p>

<p>At the end of the process performed in the Apple API, you will receive a JSON containing two important fields that will be used in “PART 3”: the <code class="language-plaintext highlighter-rouge">paymentData.data</code> and the <code class="language-plaintext highlighter-rouge">ephemeralPublicKey.header.EphemeralPublicKey</code> fields.</p>

<div class="language-json highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="p">{</span><span class="w">
   </span><span class="nl">"applePayData"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
      </span><span class="nl">"paymentData"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
         </span><span class="nl">"version"</span><span class="p">:</span><span class="w"> </span><span class="s2">"EC_v1"</span><span class="p">,</span><span class="w">
         </span><span class="nl">"data"</span><span class="p">:</span><span class="w"> </span><span class="s2">"as01vRj+n9crY2vome7zc+u7Tz0+qg2La/8IUHpJIjFN6ThhUqLnSrskQHTrEbcYPiMksFK0+ddo9sZu70uJQJH1I+44N6PrVhilNDem97vOXq2VYDXiVJ27F/Q9wGQDgZBeGcZ6Pml9SIelHqUauBcQoOatrlnWPUL8kbdpT8WqgzXyaCh7oeTz=z6++rp/ofjvSjnGtOqAUsnrzvw4uzkcyKUSsfROdJ6B/Xzgu/T9fMIr5UxXD2DPF1SNh3ydEJABKz4HFjDW7ObvbQeua4GYxJdpQLpI3NgUbJy91E/LOyb/+PcCtO+0=a41tBrfnTTF9qsPuCIw8HWIEEKSRofn27NTofxev/i+nHEfqEtqNrN/epIvhzceD/gDiGetfiLKMzf94ARmpWUAMC=="</span><span class="p">,</span><span class="w">
         </span><span class="nl">"signature"</span><span class="p">:</span><span class="w"> </span><span class="s2">"(…)"</span><span class="p">,</span><span class="w">
         </span><span class="nl">"header"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
            </span><span class="nl">"ephemeralPublicKey"</span><span class="p">:</span><span class="w"> </span><span class="s2">"MFkwEwZJKoZIzj0CAQYIKo12zj0DAQcDQgAEo+ReGClSmQ4hDJD1yh9nci3V4l7kPm2AQtKZMMvuNS0iK5sn/1A9l3kw1B1xCqOycZmnPSng7p5hpTvrei1BCA=="</span><span class="p">,</span><span class="w">
            </span><span class="nl">"publicKeyHash"</span><span class="p">:</span><span class="w"> </span><span class="s2">"KXN06+BtJu6yEfF9zDhr7f4M/2HwVybnx0FGfC520gB="</span><span class="p">,</span><span class="w">
            </span><span class="nl">"transactionId"</span><span class="p">:</span><span class="w"> </span><span class="s2">"71c5b61c3791546e94d2b4893a6c69aaac2ab86b5c113c83a7d89057906a9b5f"</span><span class="w">
         </span><span class="p">}</span><span class="w">
      </span><span class="p">},</span><span class="w">
      </span><span class="nl">"paymentMethod"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
         </span><span class="nl">"displayName"</span><span class="p">:</span><span class="w"> </span><span class="s2">"MasterCard 1212"</span><span class="p">,</span><span class="w">
         </span><span class="nl">"network"</span><span class="p">:</span><span class="w"> </span><span class="s2">"MasterCard"</span><span class="p">,</span><span class="w">
         </span><span class="nl">"type"</span><span class="p">:</span><span class="w"> </span><span class="s2">"credit"</span><span class="w">
      </span><span class="p">},</span><span class="w">
      </span><span class="nl">"transactionIdentifier"</span><span class="p">:</span><span class="w"> </span><span class="s2">"81C5B61C3791646E94D2B4893A6C69BBBC2AB86B5C363C83A7D89057906A9BAC"</span><span class="w">
   </span><span class="p">},</span><span class="w">
   </span><span class="nl">"x_document"</span><span class="p">:</span><span class="w"> </span><span class="s2">"24562608994"</span><span class="p">,</span><span class="w">
   </span><span class="nl">"x_name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"João da Silva"</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre></div></div>

<h3 id="important-note">Important Note</h3>

<aside class="warning">During the Apple Pay implementation, there will be a reference to the ". CER" certificate, generated in PART 1, to encrypt the data while communicating with Apple. The decryption process of the data returned by Apple MUST NOT be implemented at this point as, for Braspag customers, this task will be carried out by our gateway solution, Pagador.</aside>

<h2 id="part-3-integrating-with-pagador-decryption-and-authorization">PART 3. Integrating with Pagador (decryption and authorization)</h2>

<p>Authorization with the Apple Pay token happens in the same way as standard credit card authorization. However, instead of transmitting the card data openly, you must provide the token received from Apple Pay, as shown in the example below:</p>

<h3 id="request-1">Request</h3>

<div class="language-json highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="p">{</span><span class="w">
   </span><span class="nl">"MerchantOrderId"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2017051002"</span><span class="p">,</span><span class="w">
   </span><span class="nl">"Customer"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
     </span><span class="err">(…)</span><span class="w">
   </span><span class="p">},</span><span class="w">
   </span><span class="nl">"Payment"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
      </span><span class="nl">"Type"</span><span class="p">:</span><span class="w"> </span><span class="s2">"CreditCard"</span><span class="p">,</span><span class="w">
      </span><span class="nl">"Amount"</span><span class="p">:</span><span class="w"> </span><span class="mi">1000</span><span class="p">,</span><span class="w">
      </span><span class="nl">"Provider"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Cielo30"</span><span class="p">,</span><span class="w">
      </span><span class="nl">"Installments"</span><span class="p">:</span><span class="w"> </span><span class="mi">1</span><span class="p">,</span><span class="w">
      </span><span class="nl">"Currency"</span><span class="p">:</span><span class="w"> </span><span class="s2">"BRL"</span><span class="p">,</span><span class="w">
      </span><span class="nl">"Wallet"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
         </span><span class="nl">"Type"</span><span class="p">:</span><span class="w"> </span><span class="s2">"ApplePay"</span><span class="p">,</span><span class="w">
         </span><span class="nl">"WalletKey"</span><span class="p">:</span><span class="s2">"['paymentData.data']"</span><span class="p">,</span><span class="w">
         </span><span class="nl">"AdditionalData"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
            </span><span class="nl">"EphemeralPublicKey"</span><span class="p">:</span><span class="w"> </span><span class="s2">"['ephemeralPublicKey.header.EphemeralPublicKey']"</span><span class="w">
         </span><span class="p">}</span><span class="w">
      </span><span class="p">}</span><span class="w">
   </span><span class="p">}</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre></div></div>

<table>
  <thead>
    <tr>
      <th>Header Parameters</th>
      <th>Description</th>
      <th>Type and Size</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td><code class="language-plaintext highlighter-rouge">MerchantId</code></td>
      <td>Store ID in Pagador.</td>
      <td>GUID (36)</td>
    </tr>
    <tr>
      <td><code class="language-plaintext highlighter-rouge">MerchantKey</code></td>
      <td>API key in Pagador.</td>
      <td>String (24)</td>
    </tr>
  </tbody>
</table>

<table>
  <thead>
    <tr>
      <th>Parameter</th>
      <th>Description</th>
      <th>Type and Size</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td><code class="language-plaintext highlighter-rouge">MerchantOrderId</code></td>
      <td>Order ID number.</td>
      <td>String (50)</td>
    </tr>
    <tr>
      <td><code class="language-plaintext highlighter-rouge">Customer</code></td>
      <td>Node with customer’s data.</td>
      <td>Refer to the <a href="https://braspag.github.io//en/manual/braspag-pagador#request" target="_blank">Pagador Guide</a>.</td>
    </tr>
    <tr>
      <td><code class="language-plaintext highlighter-rouge">Payment.Type</code></td>
      <td>Payment method type. Possibilities: “CreditCard” / “DebitCard”.</td>
      <td>String (100)</td>
    </tr>
    <tr>
      <td><code class="language-plaintext highlighter-rouge">Payment.Amount</code></td>
      <td>Order amount in cents.</td>
      <td>Number (15)</td>
    </tr>
    <tr>
      <td><code class="language-plaintext highlighter-rouge">Payment.Provider</code></td>
      <td>Name of payment method provider. For Apple Pay transactions, use “Cielo30”.</td>
      <td>String (15)</td>
    </tr>
    <tr>
      <td><code class="language-plaintext highlighter-rouge">Payment.Installments</code></td>
      <td>Number of installments.</td>
      <td>Number (2)</td>
    </tr>
    <tr>
      <td><code class="language-plaintext highlighter-rouge">Payment.Wallet.Type</code></td>
      <td>Name of payment method provider. For Apple Pay transactions, use “ApplePay”.</td>
      <td>String (15)</td>
    </tr>
    <tr>
      <td><code class="language-plaintext highlighter-rouge">Payment.Wallet.WalletKey</code></td>
      <td>Fill with the <code class="language-plaintext highlighter-rouge">paymentData.data</code> parameter value returned by Apple Pay.</td>
      <td>String</td>
    </tr>
    <tr>
      <td><code class="language-plaintext highlighter-rouge">Payment.Wallet.AdditionalData.EphemeralPublicKey</code></td>
      <td>Fill with the <code class="language-plaintext highlighter-rouge">ephemeralPublicKey.header.EphemeralPublicKey</code> parameter value returned by Apple Pay.</td>
      <td>String</td>
    </tr>
  </tbody>
</table>

<h3 id="response">Response</h3>

<div class="language-json highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="p">{</span><span class="w">
    </span><span class="nl">"MerchantOrderId"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2017051002"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"Customer"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="err">(…)</span><span class="w">
    </span><span class="p">},</span><span class="w">
    </span><span class="nl">"Payment"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
        </span><span class="err">(…)</span><span class="w">
        </span><span class="nl">"CreditCard"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
            </span><span class="err">(…)</span><span class="w">
        </span><span class="p">},</span><span class="w">
        </span><span class="err">(…)</span><span class="w">
        </span><span class="nl">"Wallet"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
            </span><span class="nl">"Type"</span><span class="p">:</span><span class="w"> </span><span class="s2">"ApplePay"</span><span class="p">,</span><span class="w">
            </span><span class="nl">"WalletKey"</span><span class="p">:</span><span class="w"> </span><span class="s2">"as01vRj+n9crY2vome7zc+u7Tz0+qg2La/8IUHpJIjFN6ThhUqLnSrskQHTrEbcYPiMksFK0+ddo9sZu70uJQJH1I+44N6PrVhilNDem97vOXq2VYDXiVJ27F/Q9wGQDgZBeGcZ6Pml9SIelHqUauBcQoOatrlnWPUL8kbdpT8WqgzXyaCh7oeTz=z6++rp/ofjvSjnGtOqAUsnrzvw4uzkcyKUSsfROdJ6B/Xzgu/T9fMIr5UxXD2DPF1SNh3ydEJABKz4HFjDW7ObvbQeua4GYxJdpQLpI3NgUbJy91E/LOyb/+PcCtO+0=a41tBrfnTTF9qsPuCIw8HWIEEKSRofn27NTofxev/i+nHEfqEtqNrN/epIvhzceD/gDiGetfiLKMzf94ARmpWUAMC=="</span><span class="p">,</span><span class="w">
            </span><span class="nl">"AdditionalData"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
                </span><span class="nl">"EphemeralPublicKey"</span><span class="p">:</span><span class="w"> </span><span class="s2">"MFkwEwZJKoZIzj0CAQYIKo12zj0DAQcDQgAEo+ReGClSmQ4hDJD1yh9nci3V4l7kPm2AQtKZMMvuNS0iK5sn/1A9l3kw1B1xCqOycZmnPSng7p5hpTvrei1BCA=="</span><span class="w">
            </span><span class="p">}</span><span class="w">
        </span><span class="p">},</span><span class="w">
        </span><span class="err">(…)</span><span class="w">
        </span><span class="nl">"Links"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
            </span><span class="err">(…)</span><span class="w">
        </span><span class="p">]</span><span class="w">
    </span><span class="p">}</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre></div></div>

<p>The authorization response returned by the wallet will have the same fields shown in our <a href="https://braspag.github.io//en/manual/braspag-pagador#response">Pagador</a> documentation, but with the addition of the <code class="language-plaintext highlighter-rouge">Payment.Wallet</code> node repeating the same fields used in the authorization, as described above.</p>

<h1 id="google-pay-">Google Pay ™</h1>

<p>Google Pay is an e-wallet. It allows shoppers to make payments in e-commerce stores and apps using their credit and debit cards stored in their Google Account and Android devices in a safe and easy way.</p>

<h2 id="prerequisites-1">Prerequisites</h2>

<p>In order to use Google Pay, your store must be previously registered and integrated with Google Pay. In addition to that, you must also:</p>

<ol>
  <li>Agree to Google’s terms of service.</li>
  <li>Follow the steps in this documentation to thoroughly <a href="https://developers.google.com/pay/api/android/overview" target="_blank">integrate Google Pay</a> into your app.</li>
  <li>Hire Pagador API REST as the payment gateway.</li>
  <li>Hire Cielo 3.0 as the acquirer.</li>
  <li>Integrate with <a href="https://braspag.github.io/manual/braspag-pagador" target="_blank">Pagador API REST</a>.</li>
</ol>

<h2 id="part-1-integrating-google-pay">PART 1: Integrating Google Pay</h2>

<p>Initially, you must <strong>configure your project</strong> and <strong>implement Google Pay</strong> in your Android app.</p>

<h3 id="step-1---configure-your-project">Step 1 - Configure your Project</h3>

<p>Follow the instructions described in the <a href="https://developers.google.com/pay/api/android/guides/setup" target="_blank">Google Pay Setup Guide</a>.<br />
In this step, you must <strong>add dependencies</strong> either by importing the Google Pay Services library or choosing the APIs you wish to compile. Then, you must follow the instructions and <strong>modify your project’s <em>“AndroidManifest.xml”</em> file</strong> accordingly.</p>

<h3 id="step-2---implement-google-pay">Step 2 - Implement Google Pay</h3>

<p>To integrate Google Play into your app, follow all the steps described in the <a href="https://developers.google.com/pay/api/android/guides/tutorial" target="_blank">Google Pay Tutorial Guide</a>.</p>

<p>For an accurate integration of Google Pay using Braspag’s payment gateway, the following points must be carefully considered:</p>

<h4 id="gateway-definition">Gateway Definition</h4>

<p>In <em>“Step 2: Choose a payment tokenization method”</em>, follow the “GATEWAY” integration model and assign the “PAYMENT_GATEWAY” value to the <code class="language-plaintext highlighter-rouge">type</code> parameter and the “cielo” value to the <code class="language-plaintext highlighter-rouge">gateway</code> parameter, according to the example:</p>

<div class="language-json highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="err">private</span><span class="w"> </span><span class="err">static</span><span class="w"> </span><span class="err">JSONObject</span><span class="w"> </span><span class="err">getTokenizationSpecification()</span><span class="w"> </span><span class="p">{</span><span class="w">
  </span><span class="err">JSONObject</span><span class="w"> </span><span class="err">tokenizationSpecification</span><span class="w"> </span><span class="err">=</span><span class="w"> </span><span class="err">new</span><span class="w"> </span><span class="err">JSONObject();</span><span class="w">
  </span><span class="err">tokenizationSpecification.put(</span><span class="s2">"type"</span><span class="p">,</span><span class="w"> </span><span class="s2">"PAYMENT</span><span class="se">\_</span><span class="s2">GATEWAY"</span><span class="err">);</span><span class="w">
  </span><span class="err">tokenizationSpecification.put(</span><span class="w">
      </span><span class="s2">"parameters"</span><span class="p">,</span><span class="w">
      </span><span class="err">new</span><span class="w"> </span><span class="err">JSONObject()</span><span class="w">
          </span><span class="err">.put(</span><span class="s2">"gateway"</span><span class="p">,</span><span class="w"> </span><span class="s2">"cielo"</span><span class="err">)</span><span class="w">
          </span><span class="err">.put(</span><span class="s2">"gatewayMerchantId"</span><span class="p">,</span><span class="w"> </span><span class="s2">"exampleMerchantId"</span><span class="err">));</span><span class="w">
  </span><span class="err">return</span><span class="w"> </span><span class="err">tokenizationSpecification;</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre></div></div>

<p>Fill the <code class="language-plaintext highlighter-rouge">gatewayMerchantId</code> with the identifier generated for your store by the gateway. The merchant identifier has the “XXXXXXXX-XXXX-XXXX-XXXX-XXXXXXXXXXXX” format (type <em>GUID</em> / size <em>36</em>).</p>

<h4 id="card-networks-definition">Card Networks Definition</h4>

<p>In <em>“Step 3: Define supported payment card networks”</em>, proceed with the supported brands: “VISA”, “MASTERCARD”, “AMEX”, “DISCOVER” and “JCB”.</p>

<h4 id="environment-definition">Environment Definition</h4>

<p>In <em>“Step 5: Create a PaymentsClient instance”</em>, use the “WalletConstants.ENVIRONMENT_TEST” value for test purposes.</p>

<h4 id="shopping-data-definition">Shopping Data Definition</h4>

<p>In <em>“Step 7: Create a PaymentDataRequest object”</em>, use the “BRL” value for the <code class="language-plaintext highlighter-rouge">currencyCode</code> parameter. The <code class="language-plaintext highlighter-rouge">merchantName</code> field is the name that the buyer will see throughout the Google Pay payment process. Thus, the use of a friendly name is recommended.</p>

<h4 id="payment-data-recovery">Payment Data Recovery</h4>

<p>In <em>“Step 9: Handle the response object”</em>, the <code class="language-plaintext highlighter-rouge">Activity.RESULT_OK</code> event is described, in which an object is returned with all the payment data, including payment tokens.</p>

<p>Use the <code class="language-plaintext highlighter-rouge">getPaymentMethodToken()</code> method to get the <code class="language-plaintext highlighter-rouge">PaymentMethodToken</code> object from <code class="language-plaintext highlighter-rouge">PaymentData</code>. <a href="https://developers.google.com/android/reference/com/google/android/gms/wallet/PaymentData" target="_blank">Click here</a> for details.</p>

<p>After obtaining the <code class="language-plaintext highlighter-rouge">PaymentMethodToken</code>, use the <code class="language-plaintext highlighter-rouge">GetToken()</code> method, from the <code class="language-plaintext highlighter-rouge">PaymentMethodToken</code> object in order to obtain the <em>string</em> that contains the payment tokens. <a href="https://developers.google.com/android/reference/com/google/android/gms/wallet/PaymentMethodToken" target="_blank">Click here</a> for details.</p>

<p>The string obtained has a similar structure to the one in the following example. <a href="https://developers.google.com/pay/api/android/guides/resources/payment-data-cryptography" target="_blank">Click here</a> for further information.</p>

<div class="language-json highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="p">{</span><span class="w">
  </span><span class="nl">"protocolVersion"</span><span class="p">:</span><span class="w"> </span><span class="s2">"ECv1"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"signature"</span><span class="p">:</span><span class="w"> </span><span class="s2">"TJVA95OrM7E2cBab30RMHrHDcEfxjoYZgeFONFh7HgQ"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"signedMessage"</span><span class="p">:</span><span class="w"> </span><span class="s2">"{</span><span class="se">\"</span><span class="s2">encryptedMessage</span><span class="se">\"</span><span class="s2">:
  </span><span class="se">\"</span><span class="s2">ZW5jcnlwdGVkTWVzc2FnZQ==</span><span class="se">\"</span><span class="s2">,</span><span class="se">\"</span><span class="s2">ephemeralPublicKey</span><span class="se">\"</span><span class="s2">:
  </span><span class="se">\"</span><span class="s2">ZXBoZW1lcmFsUHVibGljS2V5</span><span class="se">\"</span><span class="s2">,</span><span class="se">\"</span><span class="s2">tag</span><span class="se">\"</span><span class="s2">: </span><span class="se">\"</span><span class="s2">c2lnbmF0dXJl</span><span class="se">\"</span><span class="s2">}"</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre></div></div>

<table>
  <thead>
    <tr>
      <th><strong>Parâmetro</strong></th>
      <th><strong>Type</strong></th>
      <th><strong>Descrição</strong></th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td><code class="language-plaintext highlighter-rouge">signedMessage</code></td>
      <td>string</td>
      <td>Base64-encoded encrypted message containing payment information and some additional security fields.</td>
    </tr>
    <tr>
      <td><code class="language-plaintext highlighter-rouge">signature</code></td>
      <td>string</td>
      <td>Base64-encoded ephemeral public key associated with the private key to encrypt the message in uncompressed point format.</td>
    </tr>
  </tbody>
</table>

<p>(to see more details: <a href="https://developers.google.com/pay/api/android/guides/resources/payment-data-cryptography" target="_blank">https://developers.google.com/pay/api/android/guides/resources/payment-data-cryptography</a>)</p>

<p>Hold the <code class="language-plaintext highlighter-rouge">signedMessage</code> and <code class="language-plaintext highlighter-rouge">signature</code> values. They will be requested in Braspag’s authorization process in PART 2, described ahead.</p>

<h2 id="part-2-authorization-with-token">PART 2: Authorization with Token</h2>

<p>The authorization with the Google Pay token must be performed in the same way as a standard authorization for a credit card. Although, instead of openly providing the card data, the token received through Google Pay must be provided, as in the example.</p>

<h3 id="request-2">Request</h3>

<div class="language-json highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="p">{</span><span class="w">
  </span><span class="nl">"MerchantOrderId"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2014111708"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"Customer"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
    </span><span class="err">(…)</span><span class="w">
  </span><span class="p">},</span><span class="w">
  </span><span class="nl">"Payment"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
    </span><span class="nl">"Type"</span><span class="p">:</span><span class="w"> </span><span class="s2">"CreditCard"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"Amount"</span><span class="p">:</span><span class="w"> </span><span class="mi">100</span><span class="p">,</span><span class="w">
    </span><span class="nl">"Provider"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Cielo30"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"Installments"</span><span class="p">:</span><span class="w"> </span><span class="mi">1</span><span class="p">,</span><span class="w">
    </span><span class="nl">"Wallet"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
      </span><span class="nl">"Type"</span><span class="p">:</span><span class="w"> </span><span class="s2">"AndroidPay"</span><span class="p">,</span><span class="w">
      </span><span class="nl">"WalletKey"</span><span class="p">:</span><span class="w"> </span><span class="s2">"ZW5jcnlwdGVkTWVzc2FnZQ=="</span><span class="p">,</span><span class="w">
      </span><span class="nl">"AdditionalData"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
        </span><span class="nl">"EphemeralPublicKey"</span><span class="p">:</span><span class="w"> </span><span class="s2">"ZXBoZW1lcmFsUHVibGljS2V5"</span><span class="w">
      </span><span class="p">}</span><span class="w">
    </span><span class="p">}</span><span class="w">
  </span><span class="p">}</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre></div></div>

<table>
  <thead>
    <tr>
      <th>Header Parameters</th>
      <th>Description</th>
      <th>Type and Size</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td><code class="language-plaintext highlighter-rouge">MerchantId</code></td>
      <td>Store identifier at Cielo 3.0. For the Sandbox environment, use 63D6ACCB-2734-4236-AB5D-843A9DAC44C7.</td>
      <td>GUID (36)</td>
    </tr>
    <tr>
      <td><code class="language-plaintext highlighter-rouge">MerchantKey</code></td>
      <td>API key for Cielo 3.0. For the Sandbox environment, use ZCVHDJWKTGOZXADDYJFURIDIKHEMRYQAQDYEJMQK.</td>
      <td>String (24)</td>
    </tr>
  </tbody>
</table>

<table>
  <thead>
    <tr>
      <th>Parameters</th>
      <th>Description</th>
      <th>Type and Size</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td><code class="language-plaintext highlighter-rouge">MerchantOrderId</code></td>
      <td>Order identification number.</td>
      <td>String (50)</td>
    </tr>
    <tr>
      <td><code class="language-plaintext highlighter-rouge">Customer</code></td>
      <td>Node with the buyer’s data.</td>
      <td>Refer to the <a href="https://braspag.github.io//en/manual/braspag-pagador#request" target="_blank">Pagador Guide</a>.</td>
    </tr>
    <tr>
      <td><code class="language-plaintext highlighter-rouge">Payment.Type</code></td>
      <td>Payment method type. Possible values: “CreditCard” / “DebitCard”.</td>
      <td>String (100)</td>
    </tr>
    <tr>
      <td><code class="language-plaintext highlighter-rouge">Payment.Amount</code></td>
      <td>Transaction amount in cents.</td>
      <td>Number (15)</td>
    </tr>
    <tr>
      <td><code class="language-plaintext highlighter-rouge">Payment.Provider</code></td>
      <td>Payment method provider name. For Google Pay, use “Cielo30”.</td>
      <td>String (15)</td>
    </tr>
    <tr>
      <td><code class="language-plaintext highlighter-rouge">Payment.Installments</code></td>
      <td>Number of installments.</td>
      <td>Number (2)</td>
    </tr>
    <tr>
      <td><code class="language-plaintext highlighter-rouge">Payment.Wallet.Type</code></td>
      <td>Wallet provider name. For Google Pay, use “AndroidPay”.</td>
      <td>String (15)</td>
    </tr>
    <tr>
      <td><code class="language-plaintext highlighter-rouge">Payment.Wallet.WalletKey</code></td>
      <td>Provide the <code class="language-plaintext highlighter-rouge">signedMessage</code> received from Google Pay.</td>
      <td>String</td>
    </tr>
    <tr>
      <td><code class="language-plaintext highlighter-rouge">Payment.Wallet.AdditionalData. EphemeralPublicKey</code></td>
      <td>Provide the <code class="language-plaintext highlighter-rouge">signature</code> received from Google Pay.</td>
      <td>String</td>
    </tr>
  </tbody>
</table>

<p>For further information, refer to the <a href="https://braspag.github.io//en/manual/braspag-pagador" target="_blank">Pagador Guide</a>.</p>

<h3 id="response-1">Response</h3>

<p>The wallet authorization response will have the same fields as the ones presented in our <a href="https://braspag.github.io//en/manual/braspag-pagador#response" target="_blank">Pagador</a> documentation. The response will be added of the <code class="language-plaintext highlighter-rouge">Payment.Wallet</code> node, which will repeat the same fields used in the request and described above.</p>

<h2 id="part-3-production-data-request">PART 3: Production Data Request</h2>

<p>In order to complete the process, first <strong>validate the steps</strong> performed in PARTS 1 and 2. Then, <strong>request your access credentials</strong> for deployment.</p>

<h3 id="step-1---branding-guideline">Step 1 - Branding Guideline</h3>

<p>Verify whether the <a href="https://developers.google.com/pay/api/android/guides/brand-guidelines" target="_blank">branding guidelines</a> have been thoroughly followed.</p>

<h3 id="step-2---checklist-and-credentials-request">Step 2 - Checklist and Credentials Request</h3>

<p>Verify whether all items in the <a href="https://developers.google.com/pay/api/android/guides/test-and-deploy/integration-checklist" target="_blank">integration checklist</a> have been completed.</p>

<p>After the validation in steps 1 and 2 is done, request your access credentials for the production environment.</p>

<h1 id="samsung-pay-">Samsung Pay ™</h1>

<p>Below is one prerequisite for using Samsung Pay, followed by an example of a request to make it available in your store.</p>

<aside class="warning">The store must already have Samsung registration and integration before integrating with the Pagador API.</aside>

<h2 id="request-3">Request</h2>

<p>Example of a standard Samsung Pay request:</p>

<aside class="request"><span class="method post">POST</span> <span class="endpoint">/v2/sales/</span></aside>

<div class="language-json highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="p">{</span><span class="w">
  </span><span class="nl">"MerchantOrderId"</span><span class="p">:</span><span class="s2">"6242-642-723"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"Customer"</span><span class="p">:{</span><span class="w">
     </span><span class="nl">"Name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Example Standard Wallet"</span><span class="p">,</span><span class="w">
     </span><span class="nl">"Identity"</span><span class="p">:</span><span class="w"> </span><span class="s2">"11225468954"</span><span class="p">,</span><span class="w">
      </span><span class="nl">"IdentityType"</span><span class="p">:</span><span class="w"> </span><span class="s2">"CPF"</span><span class="w">
  </span><span class="p">},</span><span class="w">
  </span><span class="nl">"Payment"</span><span class="p">:{</span><span class="w">
     </span><span class="nl">"Type"</span><span class="p">:</span><span class="s2">"CreditCard"</span><span class="p">,</span><span class="w">
     </span><span class="nl">"Amount"</span><span class="p">:</span><span class="w"> </span><span class="mi">1</span><span class="p">,</span><span class="w">
     </span><span class="nl">"Provider"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Cielo"</span><span class="p">,</span><span class="w">
     </span><span class="nl">"Installments"</span><span class="p">:</span><span class="mi">1</span><span class="p">,</span><span class="w">
     </span><span class="nl">"Currency"</span><span class="p">:</span><span class="s2">"BRL"</span><span class="p">,</span><span class="w">
     </span><span class="nl">"Wallet"</span><span class="p">:{</span><span class="w">
       </span><span class="nl">"Type"</span><span class="p">:</span><span class="s2">"SamsungPay"</span><span class="p">,</span><span class="w">
       </span><span class="nl">"WalletKey"</span><span class="p">:</span><span class="s2">"eyJhbGciOiJSU0ExXzUiLCJraWQiOiIvam1iMU9PL2hHdFRVSWxHNFpxY2VYclVEbmFOUFV1ZUR5M2FWeHBzYXVRPSIsInR5cCI6IkpPU0UiLCJjaGFubmVsU2VjdXJpdHlDb250ZXh0IjoiUlNBX1BLSSIsImVuYyI6IkExMjhHQ00ifQ.cCsGbqgFdzVb1jhXNR--gApzoXH-LldMArSoG59x6i0BbI7jttqxyAdcriSy8q_77VAp3854P9kekjj54RKLrP6APDIr46DI97kjG9E99ONXImnEyamHj95ZH_AW8lvkfa09KAr4537RM8GEXyZoys2vfIW8zqjjicZ8EKIpAixNlmrFJu6-Bo_utsmDN_DuGm69Kk2_nh6txa7ML9PCI59LFfOMniAf7ZwoZUBDCY7Oh8kx3wsZ0kxNBwfyLBCMEYzET0qcIYxePezQpkNcaZ4oogmdNSpYY-KbZGMcWpo1DKhWphDVp0lZcLxA6Q25K78e5AtarR5whN4HUAkurQ.CFjWpHkAVoLCG8q0.NcsTuauebemJXmos_mLMTyLhEHL-p5Wv6J88WkgzyjAt_DW7laiPMYw2sqRXkOiMJLwhifRzbSp8ZgJBM25IX05dKKSS4XfFjJQQjOBHw6PYtEF5pUDMLHML3jcddCrX07abfef_DuP41PqOQYsjwesLZ8XsRj-R0TH4diOZ_GQop8_oawjRIo9eJr9Wbtho0h8kAzHYpfuhamOPT718EaGAY6SSrR7t6nBkzGNkrKAmHkC7aRwe.AbZG53wRqgF0XRG3wUK_UQ"</span><span class="w">
    </span><span class="p">}</span><span class="w">
  </span><span class="p">}</span><span class="w">
</span><span class="p">}</span><span class="w">

</span></code></pre></div></div>

<table>
  <thead>
    <tr>
      <th>Property</th>
      <th>Description</th>
      <th>Type</th>
      <th>Size</th>
      <th>Required</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td><code class="language-plaintext highlighter-rouge">MerchantId</code></td>
      <td>Store identifier at Braspag.</td>
      <td>GUID</td>
      <td>36</td>
      <td>Yes (through header)</td>
    </tr>
    <tr>
      <td><code class="language-plaintext highlighter-rouge">MerchantKey</code></td>
      <td>Public key for dual authentication at Braspag.</td>
      <td>Text</td>
      <td>40</td>
      <td>Yes (through header)</td>
    </tr>
    <tr>
      <td><code class="language-plaintext highlighter-rouge">RequestId</code></td>
      <td>Request identifier, used when the merchant uses different servers for each GET/POST/PUT.</td>
      <td>GUID</td>
      <td>36</td>
      <td>No (through header)</td>
    </tr>
    <tr>
      <td><code class="language-plaintext highlighter-rouge">MerchantOrderId</code></td>
      <td>Order ID number.</td>
      <td>Text</td>
      <td>50</td>
      <td>Yes</td>
    </tr>
    <tr>
      <td><code class="language-plaintext highlighter-rouge">Customer.Name</code></td>
      <td>Customer’s name.</td>
      <td>Text</td>
      <td>255</td>
      <td>Yes</td>
    </tr>
    <tr>
      <td><code class="language-plaintext highlighter-rouge">Customer.Status</code></td>
      <td>Customer’s registration status (“NEW” / “EXISTING”).</td>
      <td>Text</td>
      <td>255</td>
      <td>No</td>
    </tr>
    <tr>
      <td><code class="language-plaintext highlighter-rouge">Payment.Type</code></td>
      <td>Payment method type.</td>
      <td>Text</td>
      <td>100</td>
      <td>Yes</td>
    </tr>
    <tr>
      <td><code class="language-plaintext highlighter-rouge">Payment.Amount</code></td>
      <td>Order amount in cents.</td>
      <td>Number</td>
      <td>15</td>
      <td>Yes</td>
    </tr>
    <tr>
      <td><code class="language-plaintext highlighter-rouge">Payment.Provider</code></td>
      <td>Cielo providers only (“Cielo” / “Cielo30”).</td>
      <td>Text</td>
      <td>15</td>
      <td>Yes</td>
    </tr>
    <tr>
      <td><code class="language-plaintext highlighter-rouge">Payment.Installments</code></td>
      <td>Number of installments.</td>
      <td>Number</td>
      <td>2</td>
      <td>Yes</td>
    </tr>
    <tr>
      <td><code class="language-plaintext highlighter-rouge">Wallet.Type</code></td>
      <td>Wallet type: “ApplePay” / “SamsungPay” / “GooglePay” / “VisaCheckout” / “Masterpass”.</td>
      <td>Text</td>
      <td>255</td>
      <td>Yes</td>
    </tr>
    <tr>
      <td><code class="language-plaintext highlighter-rouge">Wallet.WalletKey</code></td>
      <td>Cryptographic key that identifies stores in wallets. Check the WalletKey table in the ANNEXES for more information.</td>
      <td>Text</td>
      <td>255</td>
      <td>Yes</td>
    </tr>
  </tbody>
</table>

<h2 id="response-2">Response</h2>

<div class="language-json highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="p">{</span><span class="w">
    </span><span class="nl">"MerchantOrderId"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2014111703"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"Customer"</span><span class="p">:{</span><span class="w">
        </span><span class="nl">"Name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"[Guest]"</span><span class="w">
    </span><span class="p">},</span><span class="w">
    </span><span class="nl">"Payment"</span><span class="p">:{</span><span class="w">
        </span><span class="nl">"ServiceTaxAmount"</span><span class="p">:</span><span class="w"> </span><span class="mi">0</span><span class="p">,</span><span class="w">
        </span><span class="nl">"Installments"</span><span class="p">:</span><span class="mi">1</span><span class="p">,</span><span class="w">
        </span><span class="nl">"Interest"</span><span class="p">:</span><span class="w"> </span><span class="mi">0</span><span class="p">,</span><span class="w">
        </span><span class="nl">"Capture"</span><span class="p">:</span><span class="w"> </span><span class="kc">false</span><span class="p">,</span><span class="w">
        </span><span class="nl">"Authenticate"</span><span class="p">:</span><span class="kc">false</span><span class="p">,</span><span class="w">
        </span><span class="nl">"Recurrent"</span><span class="p">:</span><span class="kc">false</span><span class="p">,</span><span class="w">
        </span><span class="nl">"CreditCard"</span><span class="p">:{</span><span class="w">
            </span><span class="nl">"CardNumber"</span><span class="p">:</span><span class="w"> </span><span class="s2">"453211* *** **1521"</span><span class="p">,</span><span class="w">
            </span><span class="nl">"Holder"</span><span class="p">:</span><span class="w"> </span><span class="s2">"BJORN IRONSIDE"</span><span class="p">,</span><span class="w">
            </span><span class="nl">"ExpirationDate"</span><span class="p">:</span><span class="w"> </span><span class="s2">"08/2020"</span><span class="p">,</span><span class="w">
            </span><span class="nl">"SaveCard"</span><span class="p">:</span><span class="s2">"false"</span><span class="p">,</span><span class="w">
            </span><span class="nl">"Brand"</span><span class="p">:</span><span class="s2">"Visa"</span><span class="p">,</span><span class="w">
        </span><span class="p">},</span><span class="w">
        </span><span class="nl">"Tid"</span><span class="p">:</span><span class="w"> </span><span class="s2">"0319040817883"</span><span class="p">,</span><span class="w">
        </span><span class="nl">"ProofOfSale"</span><span class="p">:</span><span class="w"> </span><span class="s2">"817883"</span><span class="p">,</span><span class="w">
        </span><span class="nl">"AuthorizationCode"</span><span class="p">:</span><span class="w"> </span><span class="s2">"027795"</span><span class="p">,</span><span class="w">
        </span><span class="nl">"Wallet"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
            </span><span class="nl">"Type"</span><span class="p">:</span><span class="w"> </span><span class="s2">"SamsungPay"</span><span class="p">,</span><span class="w">
            </span><span class="nl">"WalletKey"</span><span class="p">:</span><span class="w"> </span><span class="s2">"eyJhbGciOiJSU0ExXzUiLCJraWQiOiIvam1iMU9PL2hHdFRVSWxHNFpxY2VYclVEbmFOUFV1ZUR5M2FWeHBzYXVRPSIsInR5cCI6IkpPU0UiLCJjaGFubmVsU2VjdXJpdHlDb250ZXh0IjoiUlNBX1BLSSIsImVuYyI6IkExMjhHQ00ifQ.cCsGbqgFdzVb1jhXNR--gApzoXH-LldMArSoG59x6i0BbI7jttqxyAdcriSy8q_77VAp3854P9kekjj54RKLrP6APDIr46DI97kjG9E99ONXImnEyamHj95ZH_AW8lvkfa09KAr4537RM8GEXyZoys2vfIW8zqjjicZ8EKIpAixNlmrFJu6-Bo_utsmDN_DuGm69Kk2_nh6txa7ML9PCI59LFfOMniAf7ZwoZUBDCY7Oh8kx3wsZ0kxNBwfyLBCMEYzET0qcIYxePezQpkNcaZ4oogmdNSpYY-KbZGMcWpo1DKhWphDVp0lZcLxA6Q25K78e5AtarR5whN4HUAkurQ.CFjWpHkAVoLCG8q0.NcsTuauebemJXmos_mLMTyLhEHL-p5Wv6J88WkgzyjAt_DW7laiPMYw2sqRXkOiMJLwhifRzbSp8ZgJBM25IX05dKKSS4XfFjJQQjOBHw6PYtEF5pUDMLHML3jcddCrX07abfef_DuP41PqOQYsjwesLZ8XsRj-R0TH4diOZ_GQop8_oawjRIo9eJr9Wbtho0h8kAzHYpfuhamOPT718EaGAY6SSrR7t6nBkzGNkrKAmHkC7aRwe.AbZG53wRqgF0XRG3wUK_UQ"</span><span class="p">,</span><span class="w">
            </span><span class="nl">"Eci"</span><span class="p">:</span><span class="w"> </span><span class="mi">0</span><span class="w">
        </span><span class="p">},</span><span class="w">
        </span><span class="nl">"SoftDescriptor"</span><span class="p">:</span><span class="w"> </span><span class="s2">"123456789ABCD"</span><span class="p">,</span><span class="w">
        </span><span class="nl">"Amount"</span><span class="p">:</span><span class="w"> </span><span class="mi">100</span><span class="p">,</span><span class="w">
        </span><span class="nl">"ReceivedDate"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2018-03-19 16:08:16"</span><span class="p">,</span><span class="w">
        </span><span class="nl">"Status"</span><span class="p">:</span><span class="w"> </span><span class="mi">1</span><span class="p">,</span><span class="w">
        </span><span class="nl">"IsSplitted"</span><span class="p">:</span><span class="w"> </span><span class="kc">false</span><span class="p">,</span><span class="w">
        </span><span class="nl">"ReturnMessage"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Operation Successful"</span><span class="p">,</span><span class="w">
        </span><span class="nl">"ReturnCode"</span><span class="p">:</span><span class="w"> </span><span class="s2">"4"</span><span class="p">,</span><span class="w">
        </span><span class="nl">"PaymentId"</span><span class="p">:</span><span class="w"> </span><span class="s2">"e57b09eb-475b-44b6-ac71-01b9b82f2491"</span><span class="p">,</span><span class="w">
        </span><span class="nl">"Type"</span><span class="p">:</span><span class="s2">"CreditCard"</span><span class="p">,</span><span class="w">
        </span><span class="nl">"Currency"</span><span class="p">:</span><span class="s2">"BRL"</span><span class="p">,</span><span class="w">
        </span><span class="nl">"Country"</span><span class="p">:</span><span class="s2">"BRA"</span><span class="p">,</span><span class="w">
        </span><span class="nl">"Links"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
            </span><span class="p">{</span><span class="w">
                </span><span class="nl">"Method"</span><span class="p">:</span><span class="w"> </span><span class="s2">"GET"</span><span class="p">,</span><span class="w">
                </span><span class="nl">"Rel"</span><span class="p">:</span><span class="w"> </span><span class="s2">"self"</span><span class="p">,</span><span class="w">
                </span><span class="nl">"Href"</span><span class="p">:</span><span class="w"> </span><span class="s2">"https://apiquerysandbox.braspag.com.br/v2/sales/e57b09eb-475b-44b6-ac71-01b9b82f2491"</span><span class="w">
            </span><span class="p">},</span><span class="w">
            </span><span class="p">{</span><span class="w">
                </span><span class="nl">"Method"</span><span class="p">:</span><span class="w"> </span><span class="s2">"PUT"</span><span class="p">,</span><span class="w">
                </span><span class="nl">"Rel"</span><span class="p">:</span><span class="w"> </span><span class="s2">"capture"</span><span class="p">,</span><span class="w">
                </span><span class="nl">"Href"</span><span class="p">:</span><span class="w"> </span><span class="s2">"https://apisandbox.braspag.com.br/v2/sales/e57b09eb-475b-44b6-ac71-01b9b82f2491/capture"</span><span class="w">
            </span><span class="p">},</span><span class="w">
            </span><span class="p">{</span><span class="w">
                </span><span class="nl">"Method"</span><span class="p">:</span><span class="w"> </span><span class="s2">"PUT"</span><span class="p">,</span><span class="w">
                </span><span class="nl">"Rel"</span><span class="p">:</span><span class="w"> </span><span class="s2">"void"</span><span class="p">,</span><span class="w">
                </span><span class="nl">"Href"</span><span class="p">:</span><span class="w"> </span><span class="s2">"https://apisandbox.braspag.com.br/v2/sales/e57b09eb-475b-44b6-ac71-01b9b82f2491/void"</span><span class="w">
            </span><span class="p">}</span><span class="w">
        </span><span class="p">]</span><span class="w">
    </span><span class="p">}</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre></div></div>

<table>
  <thead>
    <tr>
      <th>Property</th>
      <th>Description</th>
      <th>Type</th>
      <th>Size</th>
      <th>Format</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td><code class="language-plaintext highlighter-rouge">ProofOfSale</code></td>
      <td>Authorization number, identical to the NSU.</td>
      <td>Text</td>
      <td>6</td>
      <td>Alphanumeric</td>
    </tr>
    <tr>
      <td><code class="language-plaintext highlighter-rouge">Tid</code></td>
      <td>Transaction ID on the acquirer.</td>
      <td>Text</td>
      <td>20</td>
      <td>Alphanumeric</td>
    </tr>
    <tr>
      <td><code class="language-plaintext highlighter-rouge">AuthorizationCode</code></td>
      <td>Authorization code.</td>
      <td>Text</td>
      <td>6</td>
      <td>Alphanumeric</td>
    </tr>
    <tr>
      <td><code class="language-plaintext highlighter-rouge">SoftDescriptor</code></td>
      <td>Text to be printed on the bearer’s bank statement. Note: Does not allow special characters. Available for VISA/MASTER only.</td>
      <td>Text</td>
      <td>13</td>
      <td>Alphanumeric</td>
    </tr>
    <tr>
      <td><code class="language-plaintext highlighter-rouge">PaymentId</code></td>
      <td>Order identifier field.</td>
      <td>GUID</td>
      <td>36</td>
      <td>xxxxxxxx-xxxx-xxxx-xxxx-xxxxxxxxxxxx</td>
    </tr>
    <tr>
      <td><code class="language-plaintext highlighter-rouge">ECI</code></td>
      <td><em>Electronic Commerce Indicator</em>. Represents how secure a transaction is.</td>
      <td>Text</td>
      <td>2</td>
      <td>Examples: 7</td>
    </tr>
    <tr>
      <td><code class="language-plaintext highlighter-rouge">Status</code></td>
      <td>Transaction status.</td>
      <td>Byte</td>
      <td>2</td>
      <td>E.g.: 1</td>
    </tr>
    <tr>
      <td><code class="language-plaintext highlighter-rouge">ReturnCode</code></td>
      <td>Return code from the acquirer.</td>
      <td>Text</td>
      <td>32</td>
      <td>Alphanumeric</td>
    </tr>
    <tr>
      <td><code class="language-plaintext highlighter-rouge">ReturnMessage</code></td>
      <td>Return message from acquirer.</td>
      <td>Text</td>
      <td>512</td>
      <td>Alphanumeric</td>
    </tr>
    <tr>
      <td><code class="language-plaintext highlighter-rouge">Type</code></td>
      <td>Wallet type: “ApplePay” / “SamsungPay” / “GooglePay” / “VisaCheckout” / “Masterpass”.</td>
      <td>Text</td>
      <td>255</td>
      <td>Alphanumeric</td>
    </tr>
    <tr>
      <td><code class="language-plaintext highlighter-rouge">WalletKey</code></td>
      <td>Cryptographic key that identifies stores in wallets. Check the WalletKey table in the ANNEXES for more information.</td>
      <td>Text</td>
      <td>255</td>
      <td>See “WalletKey” table</td>
    </tr>
  </tbody>
</table>

<h1 id="annexes">Annexes</h1>

<h2 id="transaction-status-list">Transaction Status List</h2>

<p>List of statuses returned by the API:</p>

<table>
  <thead>
    <tr>
      <th>Code</th>
      <th>Payment status</th>
      <th>Payment method</th>
      <th>Description</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td>0</td>
      <td>NotFinished</td>
      <td>All</td>
      <td><strong>Failed to process the payment</strong>.<br />Possible causes: incorrect data, error in the request, acquirer <em>timeout</em>, some processing instability.<br />In case of debit transaction, the buyer may have abandoned the purchase.</td>
    </tr>
    <tr>
      <td>1</td>
      <td>Authorized</td>
      <td>All</td>
      <td><strong>Payment methods able to be captured or paid (boleto)</strong>.<br />For a boleto transaction, it means that the boleto was successfully generated.<br />For a card transaction, it means that there was approval by the issuing bank. However, this does not mean that the transaction has been completed - for this, a second step is required, capturing the transaction or making the payment.</td>
    </tr>
    <tr>
      <td>2</td>
      <td>PaymentConfirmed</td>
      <td>All</td>
      <td>Payment confirmed and completed.</td>
    </tr>
    <tr>
      <td>3</td>
      <td>Denied</td>
      <td>Credit and debit cards (electronic transfer) and e-wallets.</td>
      <td><strong>Payment denied by authorizer</strong>. <br />Possible causes: insufficient limit, lack of payment on the card, unavailable brand, blocking due to fraud, among others.<br />To find out the real reason for the denial, it is necessary to look at the return code generated during the transaction.</td>
    </tr>
    <tr>
      <td>10</td>
      <td>Voided</td>
      <td>All, except boleto</td>
      <td><strong>Payment canceled</strong>.<br />It is the suspension of the transaction, exempting from fees or amounts charged. Pre-authorized transactions can be canceled even after 23:59 on the authorization date. Captured transactions can be canceled up to 11:59 pm on the same day of authorization, after which time the amount will be reversed.</td>
    </tr>
    <tr>
      <td>11</td>
      <td>Refunded</td>
      <td>Credit and debit cards and e-wallets.</td>
      <td><strong>Payment cancelled/reversed</strong>.<br />Means that the cancellation of the transaction was requested, which may occur from 0:00 am on the day after the creation of the transaction. Regardless of the amount, it is only possible to make one reversal request per transaction. This can happen due to incorrect data or at the request of the shopper.</td>
    </tr>
    <tr>
      <td>12</td>
      <td>Pending</td>
      <td>Credit and debit cards (electronic transfer), e-wallets and pix.</td>
      <td><strong>Awaiting return from financial institution</strong>. <br />Means that the transaction was sent to Cielo in the pre-authorization process, awaiting a response from the issuing bank to validate it.</td>
    </tr>
    <tr>
      <td>13</td>
      <td>Aborted</td>
      <td>All</td>
      <td><strong>Payment canceled due to processing failure</strong>.<br />Means that the transaction was canceled due to processing failure. It can also be aborted if Anti-Fraud denies the transaction before authorization.</td>
    </tr>
    <tr>
      <td>20</td>
      <td>Scheduled</td>
      <td>Credit card and e-wallets.</td>
      <td><strong>Scheduled recurrence</strong>.<br />Means that the transaction will have a scheduled recurrence, that is, the purchase amount will be collected on the day it was scheduled by the store.</td>
    </tr>
  </tbody>
</table>

</div>


            <div class="footer-conteudo">
    <div id="footer-conteudo-img" class="col-lg-1 col-md-1">
            <img src="https://braspag.github.io//en/assets/images/icon-doubt.svg" width="55px" height="53px" alt="Need Help?">
    </div>

    <div id="footer-conteudo-texto" class="col-lg-11 col-md-11">
        <h2>Need Help?</h2>
        <p>If you did not find the information you need, <a href="https://suporte.braspag.com.br/hc/en-us">please contact us</a>.</p>
    </div>
</div>

        </div>

        <div class="sidebar">
  <div class="sidebar-sticky">
    <div class="sidebar-about">
      <a title="Toggle left column" class="hamburger">
        <i class="fa fa-bars hamb-menu" aria-hidden="true"></i>
      </a>
      <a href="https://braspag.github.io//en">
        <img src="https://braspag.github.io//en/assets/images/logo.png" alt="Braspag Developers - Manuais">
      </a>
      <div></div>
    </div>

    <div id="toc"></div>

    <div class="fixed-footer">
        

    <div class="toc-contact">
      <div class="contact">
        <a title="Contact" href="http://www.braspag.com.br/fale-conosco/">
          <i class="fa fa-envelope-o" aria-hidden="true"></i>
          <span>Contact</span>
        </a>
      </div>
      <div class="github">
        <a title="GitHub" href="https://github.com/Braspag">
          <i class="fa fa-github" aria-hidden="true"></i>
          <span>GitHub</span>
        </a>
      </div>
    </div>
  </div>
  </div>
</div>


        <script src="https://braspag.github.io//en/assets/js/jquery.min.js"></script>
        <script src="https://braspag.github.io//en/assets/js/jquery-ui-1.9.1.custom.min.js"></script>
        <script src="https://braspag.github.io//en/assets/js/bootstrap.js"></script>
        <script src="https://braspag.github.io//en/assets/js/jquery.tocify.js"></script>
        <script src="https://braspag.github.io//en/assets/js/prettify.js"></script>
        <script>
        $(function() {
            var openedHeader = null;

            $("#toc").tocify({
                
                selectors: "h1,h2,h3,h4,h5,h6",
                
                hashGenerator: "pretty",
                ignoreSelector: ".no-toc",
                scrollTo: 100,
                smoothScroll: false,
                showEffect: "none"
            }).data("toc-tocify");

            $('ul').prev('li').addClass('has-subitens');
            $(window).scroll(function () {
                if ($('li.active').closest('.tocify-header') !== openedHeader) {
                    $('li.is-open').removeClass('is-open');

                    openedHeader = $('li.active').closest('.tocify-header');
                }

                openedHeader.find('ul:visible').prev('li').addClass('is-open');
            });

            $('.hamburger').click(function() {
                $('body').toggleClass('sidebar-closed');
            });

            $('.code-menu').click(function() {
                $('body').toggleClass('code-menu-closed');
            });

            prettyPrint();
        });
        </script>

        
        <script src="https://braspag.github.io//en/assets/js/jquery.highlight.js"></script>
        <script src="https://braspag.github.io//en/assets/js/lunr.js"></script>
        <script src="https://braspag.github.io//en/assets/js/search.js"></script>
        

        
        <script>
        let langs = '';

        $('div.highlighter-rouge').prepend( '<a class="fa expand-btn" title="Toggle"><i class="fa fa-expand" aria-hidden=true></i></a>' );
        $('div.highlighter-rouge').each(function (index) {
            if(!$(this).parent().hasClass('language-group')) {
                $(this).first().next('div.highlighter-rouge').andSelf().wrapAll('<div class="code-fullscreen"><div class="language-group"></div></div>');
            }
        });

        $('.content-container:not(.no-dark-box) div.highlighter-rouge').each(function (index) {
            let height = $(this).outerHeight();

            $(this).parent().parent().next('table').wrapAll('<div class="table-wrap" style="min-height:' + height + 'px;"></div> ');
        });

        $('.hide-btn').click(function() {
            $('.content-container').toggleClass('no-dark-box');
            $('.dark-box').toggle();

            $('.overlay').removeClass('opened');
            $('.code-fullscreen').removeClass('opened');
        });

        $('.expand-btn').click(function() {
            $('.overlay').toggleClass('opened');
            $(this).parent().parent().parent().toggleClass('opened');
            $(this).children('i.fa').toggleClass('fa-compress');
        });

        
        langs += "<a data-language-name='json'>JSON</a>";
        
        langs += "<a data-language-name='shell'>cURL</a>";
        

        $('.language-group').prepend('<div class="language-buttons">' + langs + '</div>');
        </script>

        <script src="https://braspag.github.io//en/assets/js/lang.js"></script>
        <script>
            $(function() {
                setupLanguages([  "json",  "shell", ]);
            });
        </script>
        

        <!-- Hotjar Tracking Code for https://braspag.github.io/ -->
<script>
    (function(h,o,t,j,a,r){
        h.hj=h.hj||function(){(h.hj.q=h.hj.q||[]).push(arguments)};
        h._hjSettings={hjid:2191438,hjsv:6};
        a=o.getElementsByTagName('head')[0];
        r=o.createElement('script');r.async=1;
        r.src=t+h._hjSettings.hjid+j+h._hjSettings.hjsv;
        a.appendChild(r);
    })(window,document,'https://static.hotjar.com/c/hotjar-','.js?sv=');
</script>

    </body>
</html>
