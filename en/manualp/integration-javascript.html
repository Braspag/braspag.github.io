<!DOCTYPE html>
<html lang="en">
    <head>
    <link href="http://gmpg.org/xfn/11" rel="profile">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta http-equiv="content-type" content="text/html; charset=utf-8">
    <meta name="theme-color" content="#00aeef">
    <meta http-equiv="Content-Language" content="en">

    <!-- Enable responsiveness on mobile devices-->
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1">

    <title>
        
        2.1. Integration via Javascript &middot; Documentações e tutoriais
        
    </title>

    <link rel="shortcut icon" href="https://braspag.github.io//en/assets/favicon.png">

    <!-- CSS -->
    <link href="https://fonts.googleapis.com/css?family=Fira+Sans" rel="stylesheet">
    <script src="https://use.fontawesome.com/3ae06f1030.js"></script>
    <link rel="stylesheet" href="https://braspag.github.io//en/assets/css/poole.css">
    <link rel="stylesheet" href="https://braspag.github.io//en/assets/css/syntax.css">
    <link rel="stylesheet" href="https://braspag.github.io//en/assets/css/hyde.css">

    <link rel="stylesheet" href="https://braspag.github.io//en/assets/css/bootstrap.css">
    <link rel="stylesheet" href="https://braspag.github.io//en/assets/css/jquery.tocify.css">
    <link rel="stylesheet" href="https://braspag.github.io//en/assets/css/jquery-ui.css">
    <link rel="stylesheet" href="https://braspag.github.io//en/assets/css/prettify.css">
    <link rel="stylesheet" href="https://braspag.github.io//en/assets/css/custom.css">
    <link rel="stylesheet" href="https://braspag.github.io//en/assets/css/braspag.css">

    
        
            <link rel="alternate" hreflang="pt" href="https://braspag.github.io//en/manualp/integration-javascript" />
        
    
        
            <link rel="alternate" hreflang="en" href="https://braspag.github.io//en/en/manualp/integration-javascript" />
        
    

    <!-- RSS -->
    <link rel="alternate" type="application/rss+xml" title="RSS" href="https://braspag.github.io//en/atom.xml">
</head>

    <body>
        
        <div class="content-container">
            <div class="language-tabs">
                <a class='hide-btn' id="hide-button" title="Toggle"><i class="fa fa-bars" aria-hidden="true"></i></a>
                <ul class="language-buttons">
                    
                    <li><a data-language-name='json'>JSON</a></li>
                    
                    <li><a data-language-name='shell'>cURL</a></li>
                    
                </ul>
            </div>
            <div class="dark-box"></div>
            <div class="overlay"></div>
        
            <div id="submenu">
                <div class="submenu-container">
                    <div class="submenu-row sub-items">
                        <div class="submenu-itens">
                            <a href="http://www.braspag.com.br/suporte/" class="help">Help</a>

                            
                            <div class="lang">
                                <span>Languages</span>

                                
                                    
                                    <a href="https://braspag.github.io//manualp/integration-javascript">
                                    

                                        <img alt="Português" src="https://braspag.github.io//en/assets/images/pt.png"/>
                                    </a>
                                
                                    
                                    <a href="https://braspag.github.io//en/manualp/integration-javascript">
                                    

                                        <img alt="English" src="https://braspag.github.io//en/assets/images/en.png"/>
                                    </a>
                                
                            </div>
                            
                        </div>

                        
                        <div class="search">
                            <input type="text" class="search" id="input-search">
                        </div>
                    </div>
                    <div class="submenu-row results">
                        <div class="search-results-container">
                            <ul class="search-results"></ul>
                        </div>
                    </div>
                        

                    <div class="submenu-row breads">
                        <ol class="breadcrumb">
                            
                            <li><a href="https://braspag.github.io//en/">Home</a></li>
                            
                            
                            
                            
                                
                                    
                                    
                                    
                                    
                                    
                                        
                                    
                                        
                                    
                                        
                                    
                                
                            
                                
                                    
                                    <li class="active">&gt; <a href="https://braspag.github.io//en/manualp/integration-javascript">2.1. Integration via Javascript</a></li>
                                    
                                
                            
                        </ol>
                    </div>
                </div>
            </div>

            <div class="post">
  <h1 id="what-is-3ds-20">What is 3DS 2.0?</h1>

<p>For more details about 3DS 2.0, please visit: [https://braspag.github.io/manualp/emv3ds#o-que-%C3%A9-3ds-2.0?] (https://braspag.github.io/manualp/emv3ds#o-que-%C3%A9-3ds-2.0?)</p>

<h1 id="step-1---access-token-request">Step 1 - Access Token Request</h1>

<p>The solution consists of the API access token request step and Java Script authentication request step.</p>

<table>
  <thead>
    <tr>
      <th>Environment</th>
      <th>Endpoint</th>
      <th>Authorization</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td><strong>SANDBOX</strong></td>
      <td>https://authsandbox.braspag.com.br/oauth2/token</td>
      <td><strong>Basic <em>(Authorization)</em></strong><br />The Authorization value must be obtained by concatenating the value of the “ClientID”, colon (“:”), and “ClientSecret”<br />E.g.: b4c14ad4-5184-4ca0-8d1a-d3a7276cead9:qYmZNOSo/5Tcjq7Nl2wTfw8wuC6Z8gqFAzc/utxYjfs=<br />and then encode the result in base 64. <br />This will generate an alphanumeric access code that will be used in the access token. For testing purposes, use the following data: ClientID<br />: <strong>dba3a8db-fa54-40e0-8bab-7bfb9b6f2e2e</strong><br />ClientSecret:<strong>D/ilRsfoqHlSUChwAMnlyKdDNd7FMsM7cU/vo02REag=</strong></td>
    </tr>
  </tbody>
  <tbody>
    <tr>
      <td><strong>PRODUCTION</strong></td>
      <td>https://auth.braspag.com.br/oauth2/token</td>
      <td>Request the “ClientID” and “ClientSecret” data from the support team after completing sandbox development.</td>
    </tr>
  </tbody>
</table>

<h3 id="request">Request</h3>

<aside class="request"><span class="method post">POST</span> <span class="endpoint">/v2/auth/token</span></aside>

<div class="language-json highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="p">{</span><span class="w">
     </span><span class="nl">"EstablishmentCode"</span><span class="p">:</span><span class="s2">"1006993069"</span><span class="p">,</span><span class="w">
     </span><span class="nl">"MerchantName"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Example Store Ltda"</span><span class="p">,</span><span class="w">
     </span><span class="nl">"MCC"</span><span class="p">:</span><span class="w"> </span><span class="s2">"5912"</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre></div></div>

<div class="language-shell highlighter-rouge"><div class="highlight"><pre class="highlight"><code>curl
<span class="nt">--request</span> POST <span class="s2">"https://mpisandbox.braspag.com.br/v2/auth/token"</span>
<span class="nt">--header</span> <span class="s2">"Content-Type: application/json"</span>
<span class="nt">--header</span> <span class="s2">"Authorization: Basic xxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx"</span>
<span class="nt">--data-binary</span>
<span class="nt">--verbose</span>
<span class="o">{</span>
     <span class="s2">"EstablishmentCode"</span>:<span class="s2">"1006993069"</span>,
     <span class="s2">"MerchantName"</span>: <span class="s2">"Example Store Ltda"</span>,
     <span class="s2">"MCC"</span>: <span class="s2">"5912"</span>
<span class="o">}</span>
</code></pre></div></div>

<table>
  <thead>
    <tr>
      <th><strong>Field</strong></th>
      <th><strong>Description</strong></th>
      <th><strong>Type/Size</strong></th>
      <th><strong>Required</strong></th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td>EstablishmentCode</td>
      <td>Cielo E-Commerce 3.0 Establishment Code</td>
      <td>Numeric [10 positions]</td>
      <td> </td>
    </tr>
    <tr>
      <td>MerchantName</td>
      <td>Name of registered establishment in Cielo</td>
      <td>Alphanumeric [up to 25 positions]</td>
      <td> </td>
    </tr>
    <tr>
      <td>MCC</td>
      <td>Merchant Category Code</td>
      <td>Numeric [4 positions]</td>
      <td> </td>
    </tr>
  </tbody>
</table>

<h3 id="response">Response</h3>

<div class="language-json highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="p">{</span><span class="w">
      </span><span class="nl">"access_token"</span><span class="p">:</span><span class="w"> </span><span class="s2">"eyJ0eXAiOiJKV1QiLCJhbGciOiJIUzI1NiJ9.eyJjbGllbnRfbmFtZSI6IlFBXzNEU19BdXRoZW50aWNhdG9yIiwiY2xpZW50X2lkIjoiZGJhM2E4ZGItZmE1NC00MGUwLThiYWItN2JmYjliNmYyZTJlIiwic2NvcGVzIjoie1wiU2NvcGVcIjpcIjNEU0F1dGhlbnRpY2F0b3JcIixcIkNsYWltc1wiOlt7XCJOYW1lXCI6XCJNZXJjaGFudE5hbWVcIixcIlZhbHVlc1wiOFwiVmFsdWVzXCI6W1wiNTU1NVwiXX0se1wiTmFtZVwiOlwiUmVmZXJlbmNlSWRcIixcIlZhbHVlc1wiOltcImY3MjE1YmQ3LWM0OTQtNGQ5Yi1NzEyfQ.daMqXko3dZOV0TzNFQ2vSsVSKqOsrwuswg7RB82ecAASSSSSSSSSSSSFFFFFFFFFFFFFGGGGGGGGGGGGGGGGGGGGGGGG"</span><span class="p">,</span><span class="w">
      </span><span class="nl">"token_type"</span><span class="p">:</span><span class="w"> </span><span class="s2">"bearer"</span><span class="p">,</span><span class="w">
      </span><span class="nl">"expires_in"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2018-07-23T11:29:32"</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre></div></div>

<div class="language-shell highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nt">--header</span> <span class="s2">"Content-Type: application/json"</span>
<span class="nt">--data-binary</span>
<span class="o">{</span>
      <span class="s2">"access_token"</span>: <span class="s2">"eyJ0eXAiOiJKV1QiLCJhbGciOiJIUzI1NiJ9.eyJjbGllbnRfbmFtZSI6IlFBXzNEU19BdXRoZW50aWNhdG9yIiwiY2xpZW50X2lkIjoiZGJhM2E4ZGItZmE1NC00MGUwLThiYWItN2JmYjliNmYyZTJlIiwic2NvcGVzIjoie1wiU2NvcGVcIjpcIjNEU0F1dGhlbnRpY2F0b3JcIixcIkNsYWltc1wiOlt7XCJOYW1lXCI6XCJNZXJjaGFudE5hbWVcIixcIlZhbHVlc1wiOFwiVmFsdWVzXCI6W1wiNTU1NVwiXX0se1wiTmFtZVwiOlwiUmVmZXJlbmNlSWRcIixcIlZhbHVlc1wiOltcImY3MjE1YmQ3LWM0OTQtNGQ5Yi1NzEyfQ.daMqXko3dZOV0TzNFQ2vSsVSKqOsrwuswg7RB82ecAASSSSSSSSSSSSFFFFFFFFFFFFFGGGGGGGGGGGGGGGGGGGGGGGG"</span>,
      <span class="s2">"token_type"</span>: <span class="s2">"bearer"</span>,
      <span class="s2">"expires_in"</span>: <span class="s2">"2018-07-23T11:29:32"</span>
<span class="o">}</span>
</code></pre></div></div>

<table>
  <thead>
    <tr>
      <th><strong>Field</strong></th>
      <th><strong>Description</strong></th>
      <th><strong>Type/Size</strong></th>
      <th><strong>Required</strong></th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td>access_token</td>
      <td>Token required to perform authentication.</td>
      <td>Alphanumeric [variable size]</td>
      <td> </td>
    </tr>
    <tr>
      <td>token_type</td>
      <td>Fixed “bearer”</td>
      <td>Alphanumeric</td>
      <td> </td>
    </tr>
    <tr>
      <td>expires_in</td>
      <td>Time in minutes to expire token</td>
      <td>Numeric</td>
      <td> </td>
    </tr>
  </tbody>
</table>

<h1 id="step-2---script-implementation">Step 2 - Script Implementation</h1>

<p>In this step, is implemented <em>script</em> and mapping of <em>classes</em> are responsible for communicating with the flag and sender authentication platforms. Follow the example below, which demonstrates the basic implementation. It is recommended that the snippet be placed at the end of your checkout HTML code:</p>

<p>To download the code, [go here] (https://github.com/Braspag/braspag.github.io/blob/docs/_i18n/pt/_posts/emv3ds/example.html)</p>

<p><img src="https://braspag.github.io//images/exemplo-html.jpg" alt="3DS 2.0 Flux" /></p>

<p>Description of Events</p>

<table>
  <thead>
    <tr>
      <th><strong>Event</strong></th>
      <th><strong>Description</strong></th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td>onReady</td>
      <td>Triggers when all solution script loading procedures have completed successfully, which includes access token validation, indicating that the checkout is ready to start authentication</td>
    </tr>
    <tr>
      <td>onSuccess</td>
      <td>It is triggers when the card is eligible and has successfully completed the authentication process. In this case, the CAVV, XID, and ECI variables will be returned. This data must be sent in the request at the time of authorization. In this scenario, if the transaction is authorized, the liability shift is transferred to the issuer.</td>
    </tr>
    <tr>
      <td>onFailure</td>
      <td>It is triggers when the card is eligible but has not had the authentication process failed for some reason. In this case, only the ECI variable will be returned. If there is a decision to proceed with the authorization anyway, the ECI must be sent at the time of the request. In this scenario, if the transaction is authorized, the liability shift remains with the establishment.</td>
    </tr>
    <tr>
      <td>onUnenrolled</td>
      <td>It is triggered when the card is not eligible, ie the holder and / or issuer does not participate in the authentication program. In this case, only the ECI variable will be returned. If there is a decision to proceed with the authorization anyway, the ECI must be sent at the time of the request. In this scenario, if the transaction is authorized, the liability shift remains with the establishment.</td>
    </tr>
    <tr>
      <td>onDisabled</td>
      <td>It is triggers when the merchant has chosen not to subject the bearer to the authentication process (class “bpmpi_auth” as false). In this scenario, if the transaction is authorized, the liability shift remains with the establishment.</td>
    </tr>
    <tr>
      <td>onError</td>
      <td>It is triggered when the authentication process has received a systemic error. In this scenario, if the transaction is authorized, the liability shift remains with the establishment.</td>
    </tr>
    <tr>
      <td>onUnsupportedBrand</td>
      <td>Triggers when card brand is not supported by 3DS 2.0</td>
    </tr>
  </tbody>
</table>

<p>Description of Input Parameters</p>

<table>
  <thead>
    <tr>
      <th><strong>Parameter</strong></th>
      <th><strong>Description</strong></th>
      <th><strong>Type/Size</strong></th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td>Environment</td>
      <td>Indicates the environment to use (Sandbox or Production)</td>
      <td>SDB - Sandbox (test environment) PRD - Production (production environment)</td>
    </tr>
    <tr>
      <td>Debug</td>
      <td>Boolean indicating whether debug mode is enabled or not. When true, the platform will report on the browser debug engine.</td>
      <td>Boolean true - debug mode enabled false - debug mode disabled</td>
    </tr>
  </tbody>
</table>

<p><strong>IMPORTANT!</strong></p>

<p>The JavaScript file must be saved on the server where the store application is located. To download the file, go to:</p>

<p><a href="https://bit.ly/2CSOp2n">https://bit.ly/2CSOp2n</a></p>

<p>Description of outputs</p>

<table>
  <thead>
    <tr>
      <th><strong>Exit</strong></th>
      <th><strong>Description</strong></th>
      <th><strong>Type/Size</strong></th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td>Cavv</td>
      <td>Data representing authentication signature</td>
      <td>Text</td>
    </tr>
    <tr>
      <td>Xid</td>
      <td>ID representing the authentication request</td>
      <td>Text</td>
    </tr>
    <tr>
      <td>Eci</td>
      <td>E-commerce indicator code, which represents the result of authentication</td>
      <td>Numeric [up to 2 positions]</td>
    </tr>
    <tr>
      <td>Version</td>
      <td>3DS Version Applied</td>
      <td>Numeric [1 position] 1 - 3DS 1.02 - 3DS 2.0</td>
    </tr>
    <tr>
      <td>ReferenceID</td>
      <td>ID representing the authentication request</td>
      <td>GUID [36 positions]</td>
    </tr>
    <tr>
      <td>ReturnCode</td>
      <td>Authentication Request Return Code</td>
      <td>Alphanumeric [up to 5 positions]</td>
    </tr>
    <tr>
      <td>ReturnMessage</td>
      <td>Authentication Request Return Message</td>
      <td>Alphanumeric [variable]</td>
    </tr>
  </tbody>
</table>

<h1 id="step-3---class-mapping">Step 3 - Class Mapping</h1>

<p>The solution provides dozens of classes that must be mapped in your HTML code.</p>

<p>Once the class is mapped in a given field, the script is able to retrieve the value contained in the field and submit it to compose the authentication request.</p>

<aside class="warning">The greater the number of parameterized fields, the greater the chance of having transparent authentication, as the issuer will have greater subsidy for risk analysis</aside>
<p>.</p>

<aside class="notice">The # character indicated in the field must be replaced by a number representing the index of the item. Example: bpmpi_item_1_productName represents the name of cart item 1</aside>

<table>
  <thead>
    <tr>
      <th><strong>Parameterization Data</strong></th>
      <th><strong>Description</strong></th>
      <th><strong>Type/Size</strong></th>
      <th><strong>Required</strong></th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td>bpmpi_auth</td>
      <td>Boolean indicating whether the transaction is submitted to or not for the authentication process</td>
      <td>Boolean:<br />true - submit to authentication<br />false - do not submit to authentication</td>
      <td>Yes</td>
    </tr>
    <tr>
      <td>bpmpi_auth_notifyonly</td>
      <td>Boolean indicating whether the card transaction will be submitted in “notification only” mode. In this mode, the authentication process will not be triggered, however, the data will be flagged. ** VALID ONLY FOR MASTERCARD CARDS **</td>
      <td>Boolean: <br />true - notification only mode; <br />false - mode with authentication</td>
      <td>No</td>
    </tr>
    <tr>
      <td>bpmpi_auth_suppresschallenge</td>
      <td>Boolean indicating whether or not to ignore the challenge when it exists. If a transaction authorized after ignoring the challenge, liability remains with the establishment.</td>
      <td>Boolean: <br />true - ignore challenges if any; <br />false - present challenge if any</td>
      <td>No</td>
    </tr>
    <tr>
      <td>bpmpi_accesstoken</td>
      <td>Token generated by the Access Token API (step 1)</td>
      <td>Alphanumeric [variable]</td>
      <td>Yes</td>
    </tr>
  </tbody>
</table>

<table>
  <thead>
    <tr>
      <th><strong>Ordering Information</strong></th>
      <th><strong>Description</strong></th>
      <th><strong>Type/Size</strong></th>
      <th><strong>Required</strong></th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td>bpmpi_ordernumber</td>
      <td>Order code at establishment</td>
      <td>Alphanumeric [up to 50 positions]</td>
      <td>Yes</td>
    </tr>
    <tr>
      <td>bpmpi_currency</td>
      <td>Currency Code</td>
      <td>Fixed “BRL”</td>
      <td>Yes</td>
    </tr>
    <tr>
      <td>bpmpi_totalamount</td>
      <td>Total transaction amount, sent in cents</td>
      <td>Numeric [up to 15 positions]</td>
      <td>Yes</td>
    </tr>
    <tr>
      <td>bpmpi_installments</td>
      <td>Number of Installments</td>
      <td>Numeric [up to 2 positions]</td>
      <td>Yes</td>
    </tr>
    <tr>
      <td>bpmpi_paymentmethod</td>
      <td>Type of card to be authenticated. In the case of a multiple card, you must specify either Credit or Debit</td>
      <td>Credit - Credit<br />CardDebit - Debit Card</td>
      <td>Yes</td>
    </tr>
    <tr>
      <td>bpmpi_cardnumber</td>
      <td>Card Number</td>
      <td>Numeric [up to 19 positions]</td>
      <td>Yes</td>
    </tr>
    <tr>
      <td>bpmpi_cardexpirationmonth</td>
      <td>Month of Card Expiration</td>
      <td>Numeric [2 positions]</td>
      <td>Yes</td>
    </tr>
    <tr>
      <td>bpmpi_cardexpirationyear</td>
      <td>Year of card expiration</td>
      <td>Numeric [4 positions]</td>
      <td>Yes</td>
    </tr>
    <tr>
      <td>bpmpi_cardalias</td>
      <td>Card Alias</td>
      <td>Alphanumeric [up to 128 positions]</td>
      <td>No</td>
    </tr>
    <tr>
      <td>bpmpi_default_card</td>
      <td>Indicates if it is a standard customer card in store</td>
      <td>Boolean <br />true - yes<br />false - no</td>
      <td>No</td>
    </tr>
  </tbody>
</table>

<table>
  <thead>
    <tr>
      <th><strong>Order characteristics data</strong></th>
      <th><strong>Description</strong></th>
      <th><strong>Type/Size</strong></th>
      <th><strong>Required</strong></th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td>bpmpi_recurring_enddate</td>
      <td>Identifies recurrence end date</td>
      <td>Text (YYYY-MM-DD)</td>
      <td>No</td>
    </tr>
    <tr>
      <td>bpmpi_recurring_frequency</td>
      <td>Indicates frequency of recurrence</td>
      <td>Number<br />1 - Monthly<br />2 - Bimonthly<br />3 - Quarterly<br />4 - Four-month period<br />6 - Half-yearly<br />12 - Annual</td>
      <td>No</td>
    </tr>
    <tr>
      <td>bpmpi_recurring_originalpurchasedate</td>
      <td>Identifies the date of the 1st transaction that originated the recurrence</td>
      <td>Text (YYYY-MM-DD)</td>
      <td>No</td>
    </tr>
    <tr>
      <td>bpmpi_order_recurrence</td>
      <td>Indicates if it is an order that generates future recurrences</td>
      <td>Boolean<br />true<br />false</td>
      <td>No</td>
    </tr>
    <tr>
      <td>bpmpi_order_productcode</td>
      <td>Product Type</td>
      <td><strong>PHY</strong>: purchase Goods<br /><strong>CHA</strong>: Check acceptance<br /><strong>ACF</strong>: Account financing<br /><strong>QCT</strong>: Quasi-Cash Transaction <br /><strong>PAL</strong>: Prepaid Activation and Load<br /></td>
      <td>Yes</td>
    </tr>
    <tr>
      <td>bpmpi_order_countlast24hours</td>
      <td>Quantity of orders placed by this shopper in the last 24h</td>
      <td>Numeric [up to 3 positions]</td>
      <td>No</td>
    </tr>
    <tr>
      <td>bpmpi_order_countlast6months</td>
      <td>Number of orders placed by this shopper in the last 6 months</td>
      <td>Numeric [up to 4 positions]</td>
      <td>No</td>
    </tr>
    <tr>
      <td>bpmpi_order_countlast1year</td>
      <td>Number of orders placed by this shopper in the last year</td>
      <td>Numeric [up to 3 positions]</td>
      <td>No</td>
    </tr>
    <tr>
      <td>bpmpi_order_cardattemptslast24hours</td>
      <td>Number of same card transactions in last 24h</td>
      <td>Numeric [up to 3 positions]</td>
      <td>No</td>
    </tr>
    <tr>
      <td>bpmpi_order_marketingoptin</td>
      <td>Indicates if the buyer has accepted to receive marketing offers</td>
      <td>Boolean<br />true – yes<br />false – no</td>
      <td>No</td>
    </tr>
    <tr>
      <td>bpmpi_order_marketingsource</td>
      <td>Identifies the origin of the marketing campaign</td>
      <td>Alphanumeric [up to 40 positions]</td>
      <td>No</td>
    </tr>
    <tr>
      <td>bpmpi_transactionMode</td>
      <td>Identifies the channel that originated the transaction</td>
      <td>M: MOTO<br />R: Varejo<br />S: E-Commerce<br />P: Mobile<br />T: Tablet</td>
      <td>No</td>
    </tr>
    <tr>
      <td>bpmpi_merchant_url</td>
      <td>Establishment Website Address</td>
      <td>Alphanumeric [100] Example: http://www.example.com</td>
      <td>Yes</td>
    </tr>
  </tbody>
</table>

<table>
  <thead>
    <tr>
      <th><strong>Specific data for Gift Card (prepaid)</strong></th>
      <th><strong>Description</strong></th>
      <th><strong>Type/Size</strong></th>
      <th><strong>Required</strong></th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td>bpmpi_giftcard_amount</td>
      <td>The total amount of the purchase for rounded prepaid gift cards</td>
      <td>Numeric [up to 15 positions],<br />example: $ 125.54 = 12554</td>
      <td>No</td>
    </tr>
    <tr>
      <td>bpmpi_giftcard_currency</td>
      <td>Prepaid Card Payment Transaction Currency Code</td>
      <td>Fixed “BRL”</td>
      <td>No</td>
    </tr>
  </tbody>
</table>

<table>
  <thead>
    <tr>
      <th><strong>Billing Address Data</strong></th>
      <th><strong>Description</strong></th>
      <th><strong>Type/Size</strong></th>
      <th><strong>Required</strong></th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td>bpmpi_billto_customerid</td>
      <td>Identifies the shopper CPF/CNPJ</td>
      <td>Numeric [11 to 14 positions]<br />99999999999999</td>
      <td>No</td>
    </tr>
    <tr>
      <td>bpmpi_billto_contactname</td>
      <td>Billing Address Contact Name</td>
      <td>Alphanumeric [up to 120]</td>
      <td>Yes</td>
    </tr>
    <tr>
      <td>bpmpi_billTo_phonenumber</td>
      <td>Billing Address Contact Phone</td>
      <td>Numeric [up to 15 positions], in the format: 5511999999999</td>
      <td>Yes</td>
    </tr>
    <tr>
      <td>bpmpi_billTo_email</td>
      <td>Billing Address Contact Email</td>
      <td>Alphanumeric [up to 255], in the format [name@example.com] (mailto: name@example.com)</td>
      <td>Yes</td>
    </tr>
    <tr>
      <td>bpmpi_billTo_street1</td>
      <td>Address and Billing Address Number</td>
      <td>Alphanumeric [up to 60]</td>
      <td>Yes</td>
    </tr>
    <tr>
      <td>bpmpi_billTo_street2</td>
      <td>Billing Address Supplement and Neighborhood</td>
      <td>Alphanumeric [up to 60]</td>
      <td>Yes</td>
    </tr>
    <tr>
      <td>bpmpi_billTo_city</td>
      <td>Billing Address City</td>
      <td>Alphanumeric [up to 50]</td>
      <td>Yes</td>
    </tr>
    <tr>
      <td>bpmpi_billTo_state</td>
      <td>Billing Address State Acronym</td>
      <td>Text [2 positions]</td>
      <td>Yes</td>
    </tr>
    <tr>
      <td>bpmpi_billto_zipcode</td>
      <td>Billing Address Zip Code</td>
      <td>Alphanumeric [up to 8 positions], in the format: 99999999</td>
      <td>Yes</td>
    </tr>
    <tr>
      <td>country</td>
      <td>Billing Address Country</td>
      <td>Text [2 positions] E.g: BR</td>
      <td>Yes</td>
    </tr>
  </tbody>
</table>

<table>
  <thead>
    <tr>
      <th><strong>Shipping Address Data</strong></th>
      <th><strong>Description</strong></th>
      <th><strong>Type / Size</strong></th>
      <th><strong>Required</strong></th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td>bpmpi_shipto_sameasbillto</td>
      <td>Indicates whether to use the same address provided for billing address</td>
      <td>Boolean<br />true<br />false</td>
      <td>No</td>
    </tr>
    <tr>
      <td>bpmpi_shipto_addressee</td>
      <td>Contact Name of Shipping Address</td>
      <td>Alphanumeric [up to 60]</td>
      <td>No</td>
    </tr>
    <tr>
      <td>bpmpi_shipTo_phonenumber</td>
      <td>Contact address of shipping address</td>
      <td>Numeric [up to 15 positions], in the format: 5511999999999</td>
      <td>No</td>
    </tr>
    <tr>
      <td>bpmpi_shipTo_email</td>
      <td>Shipping Address Contact Email</td>
      <td>Alphanumeric [up to 255], in the format [name@example.com] (mailto: name@example.com)</td>
      <td>No</td>
    </tr>
    <tr>
      <td>bpmpi_shipTo_street1</td>
      <td>Address and Delivery Address Number</td>
      <td>Alphanumeric [up to 60]</td>
      <td>No</td>
    </tr>
    <tr>
      <td>bpmpi_shipTo_street2</td>
      <td>Delivery Address Complement and Neighborhood</td>
      <td>Alphanumeric [up to 60]</td>
      <td>No</td>
    </tr>
    <tr>
      <td>bpmpi_shipTo_city</td>
      <td>City of delivery address</td>
      <td>Alphanumeric [up to 50]</td>
      <td>No</td>
    </tr>
    <tr>
      <td>bpmpi_shipTo_state</td>
      <td>Shipping Address State Acronym</td>
      <td>Text [2 positions]</td>
      <td>No</td>
    </tr>
    <tr>
      <td>bpmpi_shipto_zipcode</td>
      <td>Shipping Address ZIP Code</td>
      <td>Alphanumeric [up to 8 positions], in the format: 99999999</td>
      <td>No</td>
    </tr>
    <tr>
      <td>bpmpi_shipto_country</td>
      <td>Billing Address Country</td>
      <td>Text [2 positions] E.g.: BR</td>
      <td>No</td>
    </tr>
    <tr>
      <td>bpmpi_shipTo_shippingmethod</td>
      <td>Shipping Method Type</td>
      <td>LOWCOST: Economical Shipping <br /> SAMEDAY: Same shipping<br /> ONEDAY: Next day shipping <br /> TWODAY: Two days shipping<br />THREEDAY: Three days shipping<br /> PICKUP: Delivery at the store<br />OTHER: There is no shippment</td>
      <td>No</td>
    </tr>
    <tr>
      <td>bpmpi_shipto_firstusagedate</td>
      <td>Indicates the date when the shipping address was first used</td>
      <td>Text<br />YYYY-MM-DD - Date Created</td>
      <td>No</td>
    </tr>
  </tbody>
</table>

<table>
  <thead>
    <tr>
      <th><strong>Shopping Cart Details</strong></th>
      <th><strong>Description</strong></th>
      <th><strong>Type/Size</strong></th>
      <th><strong>Required</strong></th>
      <th> </th>
      <th> </th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td>bpmpi_cart_#_description</td>
      <td>Item Description</td>
      <td>Alphanumeric [up to 255 positions]</td>
      <td>No</td>
      <td> </td>
      <td> </td>
    </tr>
    <tr>
      <td>bpmpi_cart_#_name</td>
      <td>Item Name</td>
      <td>Alphanumeric [up to 255 positions]</td>
      <td>No</td>
      <td>Yes</td>
      <td> </td>
    </tr>
    <tr>
      <td>bpmpi_cart_#_sku</td>
      <td>Item SKU</td>
      <td>Alphanumeric [up to 255 positions]</td>
      <td>No</td>
      <td> </td>
      <td> </td>
    </tr>
    <tr>
      <td>bpmpi_cart_#_quantity</td>
      <td>Item Quantity in Cart</td>
      <td>Numeric [up to 10 positions]</td>
      <td>No</td>
      <td> </td>
      <td> </td>
    </tr>
    <tr>
      <td>bpmpi_cart_#_unitprice</td>
      <td>Cart item unit value in cents</td>
      <td>Numeric [up to 10 positions]</td>
      <td>No</td>
      <td> </td>
      <td> </td>
    </tr>
  </tbody>
</table>

<table>
  <thead>
    <tr>
      <th><strong>User Data</strong></th>
      <th><strong>Description</strong></th>
      <th><strong>Type/Size</strong></th>
      <th><strong>Required</strong></th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td>bpmpi_useraccount_guest</td>
      <td>Indicates if the buyer is a buyer without login (guest)</td>
      <td>Boolean<br />true – yes<br />false – no</td>
      <td>No</td>
    </tr>
    <tr>
      <td>bpmpi_useraccount_createddate</td>
      <td>Indicates the date when the buyer account was created</td>
      <td>Text<br />YYYY-MM-DD - Date Created</td>
      <td>No</td>
    </tr>
    <tr>
      <td>bpmpi_useraccount_changeddate</td>
      <td>Indicates the date when the last buyer account change</td>
      <td>Text<br />YYYY-MM-DD - date of last change</td>
      <td>No</td>
    </tr>
    <tr>
      <td>bpmpi_useraccount_passwordchangeddate</td>
      <td>Indicates the date when the buyer account password was changed</td>
      <td>Text<br />YYYY-MM-DD - Last Password Change Date</td>
      <td>No</td>
    </tr>
    <tr>
      <td>bpmpi_useraccount_authenticationmethod</td>
      <td>Authentication Method of the shopper in the store</td>
      <td>01- Does not happen authentication<br />02- Login at the own store<br />03- Login at federated ID<br />04- Login with FIDO authenticator</td>
      <td>No</td>
    </tr>
    <tr>
      <td>bpmpi_useraccount_authenticationprotocol</td>
      <td>This represents the store login protocol</td>
      <td>Alphanumeric [up to 2048 positions]</td>
      <td>No</td>
    </tr>
    <tr>
      <td>bpmpi_useraccount_authenticationtimestamp</td>
      <td>The date and time the store was logged in</td>
      <td>Text [19 positions] <em>YYYY-MM-ddTHH: mm: SS</em></td>
      <td>No</td>
    </tr>
    <tr>
      <td>bpmpi_merchant_newcustomer</td>
      <td>Identifies if a new buyer in the store</td>
      <td>Boolean<br />true – yes<br />false – no</td>
      <td>No</td>
    </tr>
  </tbody>
</table>

<table>
  <thead>
    <tr>
      <th><strong>Data of device used for purchase</strong></th>
      <th><strong>Description</strong></th>
      <th><strong>Type/Size</strong></th>
      <th><strong>Required</strong></th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td>bpmpi_device_ipaddress</td>
      <td>Shopper’s Machine IP Address</td>
      <td>Alphanumeric [up to 45]</td>
      <td>No</td>
    </tr>
    <tr>
      <td>bpmpi_device_#_fingerprint</td>
      <td>Id returned by Device Finger Print</td>
      <td>Alphanumeric [without limitation]</td>
      <td>No</td>
    </tr>
    <tr>
      <td>bpmpi_device_#_provider</td>
      <td>Device Finger Print Provider Name</td>
      <td>Alphanumeric [up to 32 positions] cardinal<br />inauth<br />threatmetrix</td>
      <td>No</td>
    </tr>
  </tbody>
</table>

<table>
  <thead>
    <tr>
      <th><strong>Specific airline data</strong></th>
      <th><strong>Description</strong></th>
      <th><strong>Type/Size</strong></th>
      <th><strong>Required</strong></th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td>bpmpi_airline_travelleg _ # _ carrier</td>
      <td>IATA code for the stretch</td>
      <td>Alphanumeric [2 positions]</td>
      <td>No</td>
    </tr>
    <tr>
      <td>bpmpi_useraccount_createddate</td>
      <td>Indicates the date when the buyer account was created</td>
      <td>Text<br />YYYY-MM-DD - Date Created</td>
      <td>No</td>
    </tr>
    <tr>
      <td>bpmpi_airline_travelleg_#_origin</td>
      <td>IATA code of origin airport</td>
      <td>Alphanumeric [5 positions]</td>
      <td>No</td>
    </tr>
    <tr>
      <td>bpmpi_airline_travelleg_#_destination</td>
      <td>IATA code of destination airport</td>
      <td>Alphanumeric [5 positions]</td>
      <td>No</td>
    </tr>
    <tr>
      <td>bpmpi_airline_passenger_#_name</td>
      <td>Passenger Name</td>
      <td>Alphanumeric [up to 60 positions]</td>
      <td>No</td>
    </tr>
    <tr>
      <td>bpmpi_airline_passenger_#_ticketprice</td>
      <td>The ticket value in Numeric cents [up to 15 positions],<br />example: $ 125.54 = 12554</td>
      <td>No</td>
      <td> </td>
    </tr>
    <tr>
      <td>bpmpi_airline_numberofpassengers</td>
      <td>Number of Passengers</td>
      <td>Numeric [3 positions]</td>
      <td>No</td>
    </tr>
    <tr>
      <td>bpmpi_airline_billto_passportcountry</td>
      <td>Passport country code (ISO Standard Country Codes)</td>
      <td>Text [2 positions]</td>
      <td>No</td>
    </tr>
    <tr>
      <td>bpmpi_airline_billto_passportnumber</td>
      <td>Passport Number</td>
      <td>Alphanumeric [40 positions]</td>
      <td>No</td>
    </tr>
  </tbody>
</table>

<table>
  <thead>
    <tr>
      <th><strong>Extra property data (if applicable)</strong></th>
      <th><strong>Description</strong></th>
      <th><strong>Type/Size</strong></th>
      <th><strong>Required</strong></th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td>bpmpi_mdd1</td>
      <td>Extra data defined by the shopkeeper</td>
      <td>Alphanumeric [up to 255 positions]</td>
      <td>No</td>
    </tr>
    <tr>
      <td>bpmpi_mdd2</td>
      <td>Extra data defined by the shopkeeper</td>
      <td>Alphanumeric [up to 255 positions]</td>
      <td>No</td>
    </tr>
    <tr>
      <td>bpmpi_mdd3</td>
      <td>Extra data defined by the shopkeeper</td>
      <td>Alphanumeric [up to 255 positions]</td>
      <td>No</td>
    </tr>
    <tr>
      <td>bpmpi_mdd4</td>
      <td>Extra data defined by the shopkeeper</td>
      <td>Alphanumeric [up to 255 positions]</td>
      <td>No</td>
    </tr>
    <tr>
      <td>bpmpi_mdd5</td>
      <td>Extra data defined by the shopkeeper</td>
      <td>Alphanumeric [up to 255 positions]</td>
      <td>No</td>
    </tr>
  </tbody>
</table>

<h1 id="step-4---implementing-the-authentication-event-request">Step 4 - Implementing the Authentication Event Request</h1>

<p>The event <strong>bpmpi_Authenticate()</strong>” must be called at checkout (checkout). See the example below:</p>

<table>
  <tbody>
    <tr>
      <td> </td>
      <td> </td>
      <td>UNTRANSLATED_CONTENT_START</td>
      <td> </td>
      <td> </td>
      <td>&lt;input type="button"onclick="bpmpi_authenticate()" /&gt;</td>
      <td> </td>
      <td> </td>
      <td>UNTRANSLATED_CONTENT_END</td>
      <td> </td>
      <td> </td>
    </tr>
  </tbody>
</table>

<h1 id="test-cards">Test Cards</h1>

<p>Use the <strong>test</strong> cards below to simulate various scenarios in the <strong>SANDBOX</strong> environment</p>

<table>
  <tbody>
    <tr>
      <td><strong>Cards</strong></td>
      <td><strong>Result</strong></td>
      <td><strong>Description</strong></td>
    </tr>
    <tr>
      <td>Visa: 4000000000001000<br />Mastercard: 5200000000001005</td>
      <td>SUCCESS</td>
      <td>Silent Authentication and card holder successfully authenticated</td>
    </tr>
    <tr>
      <td>Visa: 4000000000001018<br />Mastercard: 5200000000001013</td>
      <td>FAILURE</td>
      <td>Silent and card holder authentication terminated with failure</td>
    </tr>
    <tr>
      <td>Visa: 4000000000001034<br />Mastercard: 5200000000001039</td>
      <td>UNENROLLED</td>
      <td>Card not eligible for authentication</td>
    </tr>
    <tr>
      <td>Visa:4000000000001091<br />Mastercard: 5200000000001096</td>
      <td>SUCCESS</td>
      <td>Challenging and card holder authentication successfully authenticated</td>
    </tr>
    <tr>
      <td>Visa:4000000000001109<br />Mastercard: 5200000000001104</td>
      <td>FAILURE</td>
      <td>Challenge authentication and card holder failed authentication</td>
    </tr>
  </tbody>
</table>

<h2 id="authorization-with-authentication">Authorization with Authentication</h2>

<p>After authentication is completed, it undergoes the authorization process by submitting the authentication data in the &amp; quot; external authentication &amp; quot; (node <strong>ExternalAuthentication</strong>).
See more details at: [https://braspag.github.io/manual/aautizacao-com-autenticacao[(https://braspag.github.io/manual/autorizacao-com-autenticacao)</p>

<h1 id="last-updates">Last updates</h1>

<p>To view the latest manual updates, [click here] (https://github.com/Braspag/braspag.github.io/commits/docs/_i18n/en/_posts/emv3ds/2019-09-13-integracao-javascript .md)</p>

</div>


            <div class="footer-conteudo">
    <div id="footer-conteudo-img" class="col-lg-1 col-md-1">
            <img src="https://braspag.github.io//en/assets/images/icon-doubt.svg" width="55px" height="53px" alt="Need Help?">
    </div>

    <div id="footer-conteudo-texto" class="col-lg-11 col-md-11">
        <h2>Need Help?</h2>
        <p>If you didn't find your answer, <a href="http://www.braspag.com.br/fale-conosco/">send us a message</a>.</p>
    </div>
</div>

        </div>

        <div class="sidebar">
  <div class="sidebar-sticky">
    <div class="sidebar-about">
      <a title="Toggle left column" class="hamburger">
        <i class="fa fa-bars hamb-menu" aria-hidden="true"></i>
      </a>
      <a href="https://braspag.github.io//en">
        <img src="https://braspag.github.io//en/assets/images/logo.png" alt="Documentações e tutoriais">
      </a>
      <div></div>
    </div>

    <div id="toc"></div>

    <div class="fixed-footer">
        

    <div class="toc-contact">
      <div class="contact">
        <a title="Contact" href="http://www.braspag.com.br/fale-conosco/">
          <i class="fa fa-envelope-o" aria-hidden="true"></i>
          <span>Contact</span>
        </a>
      </div>
      <div class="github">
        <a title="GitHub" href="https://github.com/braspag">
          <i class="fa fa-github" aria-hidden="true"></i>
          <span>GitHub</span>
        </a>
      </div>
    </div>
  </div>
  </div>
</div>


        <script src="https://braspag.github.io//en/assets/js/jquery.min.js"></script>
        <script src="https://braspag.github.io//en/assets/js/jquery-ui-1.9.1.custom.min.js"></script>
        <script src="https://braspag.github.io//en/assets/js/bootstrap.js"></script>
        <script src="https://braspag.github.io//en/assets/js/jquery.tocify.js"></script>
        <script src="https://braspag.github.io//en/assets/js/prettify.js"></script>
        <script>
        $(function() {
            var openedHeader = null;

            $("#toc").tocify({
                
                selectors: "h1,h2,h3,h4,h5,h6",
                
                hashGenerator: "pretty",
                ignoreSelector: ".no-toc",
                scrollTo: 100,
                smoothScroll: false,
                showEffect: "none"
            }).data("toc-tocify");

            $('ul').prev('li').addClass('has-subitens');
            $(window).scroll(function () {
                if ($('li.active').closest('.tocify-header') !== openedHeader) {
                    $('li.is-open').removeClass('is-open');

                    openedHeader = $('li.active').closest('.tocify-header');
                }

                openedHeader.find('ul:visible').prev('li').addClass('is-open');
            });

            $('.hamburger').click(function() {
                $('body').toggleClass('sidebar-closed');
            });

            $('.code-menu').click(function() {
                $('body').toggleClass('code-menu-closed');
            });

            prettyPrint();
        });
        </script>

        
        <script src="https://braspag.github.io//en/assets/js/jquery.highlight.js"></script>
        <script src="https://braspag.github.io//en/assets/js/lunr.js"></script>
        <script src="https://braspag.github.io//en/assets/js/search.js"></script>
        

        
        <script>
        let langs = '';

        $('div.highlighter-rouge').prepend( '<a class="fa expand-btn" title="Toggle"><i class="fa fa-expand" aria-hidden=true></i></a>' );
        $('div.highlighter-rouge').each(function (index) {
            if(!$(this).parent().hasClass('language-group')) {
                $(this).first().next('div.highlighter-rouge').andSelf().wrapAll('<div class="code-fullscreen"><div class="language-group"></div></div>');
            }
        });

        $('.content-container:not(.no-dark-box) div.highlighter-rouge').each(function (index) {
            let height = $(this).outerHeight();

            $(this).parent().parent().next('table').wrapAll('<div class="table-wrap" style="min-height:' + height + 'px;"></div> ');
        });

        $('.hide-btn').click(function() {
            $('.content-container').toggleClass('no-dark-box');
            $('.dark-box').toggle();

            $('.overlay').removeClass('opened');
            $('.code-fullscreen').removeClass('opened');
        });

        $('.expand-btn').click(function() {
            $('.overlay').toggleClass('opened');
            $(this).parent().parent().parent().toggleClass('opened');
            $(this).children('i.fa').toggleClass('fa-compress');
        });

        
        langs += "<a data-language-name='json'>JSON</a>";
        
        langs += "<a data-language-name='shell'>cURL</a>";
        

        $('.language-group').prepend('<div class="language-buttons">' + langs + '</div>');
        </script>

        <script src="https://braspag.github.io//en/assets/js/lang.js"></script>
        <script>
            $(function() {
                setupLanguages([  "json",  "shell", ]);
            });
        </script>
        

        <!-- Hotjar Tracking Code for https://braspag.github.io/ -->
<script>
    (function(h,o,t,j,a,r){
        h.hj=h.hj||function(){(h.hj.q=h.hj.q||[]).push(arguments)};
        h._hjSettings={hjid:715256,hjsv:6};
        a=o.getElementsByTagName('head')[0];
        r=o.createElement('script');r.async=1;
        r.src=t+h._hjSettings.hjid+j+h._hjSettings.hjsv;
        a.appendChild(r);
    })(window,document,'https://static.hotjar.com/c/hotjar-','.js?sv=');
</script>

    </body>
</html>
